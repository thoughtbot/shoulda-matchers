<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="https://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>
  File: README
  
    &mdash; Documentation by YARD 0.9.34
  
</title>

  <link rel="stylesheet" href="css/solarized.css" type="text/css" />

  <link rel="stylesheet" href="css/bootstrap.css" type="text/css" />

  <link rel="stylesheet" href="css/global.css" type="text/css" />

  <link rel="stylesheet" href="css/style.css" type="text/css" />

  <link rel="stylesheet" href="css/common.css" type="text/css" />

<script type="text/javascript">
  pathId = "README";
  relpath = '';
</script>


  <script type="text/javascript" charset="utf-8" src="js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="js/jquery.stickyheaders.js"></script>

  <script type="text/javascript" charset="utf-8" src="js/underscore.min.js"></script>

  <script type="text/javascript" charset="utf-8" src="js/app.js"></script>


  </head>
  <body>
    <div id="header">
      <div class="header-row">
        <div id="menu">
  
  
    <span class="title">README</span>
  
</div>

        <div id="search" class="js-search">
  <ul>
    
      <li>
        <a href="class_list.html">
          Class List
        </a>
      </li>
    
      <li>
        <a href="method_list.html">
          Method List
        </a>
      </li>
    
      <li>
        <a href="file_list.html">
          File List
        </a>
      </li>
    
  </ul>

  <iframe id="search_frame" class="js-search-frame"></iframe>
</div>

        <div class="clear"></div>
      </div>
    </div>

    <div id="main">
      <div id="content"><div id='filecontents'><h1 id="shoulda-matchers">Shoulda Matchers <a href="https://rubygems.org/gems/shoulda-matchers"><img src="https://img.shields.io/gem/v/shoulda-matchers.svg" alt="Gem Version"></a> <a href="https://github.com/thoughtbot/shoulda-matchers/actions"><img src="https://img.shields.io/github/actions/workflow/status/thoughtbot/shoulda-matchers/ci.yml?branch=main" alt="Build Status"></a> <a href="https://rubygems.org/gems/shoulda-matchers"><img src="https://img.shields.io/gem/dt/shoulda-matchers.svg" alt="Total Downloads"></a> <a href="https://rubygems.org/gems/shoulda-matchers"><img src="https://img.shields.io/gem/dtv/shoulda-matchers.svg" alt="Downloads"></a></h1>

<p><a href="https://matchers.shoulda.io/"><img src="https://matchers.shoulda.io/images/shoulda-matchers-logo.png" alt="shoulda-matchers"></a></p>

<p>Shoulda Matchers provides RSpec and Minitest-compatible one-liners to test
common Rails functionality that, if written by hand, would be much longer, more
complex, and error-prone.</p>

<h2 id="quick-links">Quick links</h2>

<p>ðŸ“– <strong><a href="https://matchers.shoulda.io/docs">Read the documentation for the latest version</a>.</strong>
ðŸ“¢ <strong><a href="CHANGELOG.md">See what&#39;s changed in recent versions</a>.</strong></p>

<h2 id="table-of-contents">Table of contents</h2>

<ul>
<li><a href="#getting-started">Getting started</a>

<ul>
<li><a href="#rspec">RSpec</a></li>
<li><a href="#rails-apps">Rails apps</a></li>
<li><a href="#non-rails-apps">Non-Rails apps</a></li>
<li><a href="#minitest">Minitest</a></li>
<li><a href="#rails-apps-1">Rails apps</a></li>
<li><a href="#non-rails-apps-1">Non-Rails apps</a></li>
</ul></li>
<li><a href="#usage">Usage</a>

<ul>
<li><a href="#on-the-subject-of-subject">On the subject of <code>subject</code></a></li>
<li><a href="#availability-of-rspec-matchers-in-example-groups">Availability of RSpec matchers in example groups</a></li>
<li><a href="#rails-projects">Rails projects</a></li>
<li><a href="#non-rails-projects">Non-Rails projects</a></li>
<li><a href="#should-vs-is_expectedto"><code>should</code> vs <code>is_expected.to</code></a></li>
<li><a href="#a-note-on-testing-style">A Note on Testing Style</a></li>
</ul></li>
<li><a href="#matchers">Matchers</a>

<ul>
<li><a href="#activemodel-matchers">ActiveModel matchers</a></li>
<li><a href="#activerecord-matchers">ActiveRecord matchers</a></li>
<li><a href="#actioncontroller-matchers">ActionController matchers</a></li>
<li><a href="#routing-matchers">Routing matchers</a></li>
<li><a href="#independent-matchers">Independent matchers</a></li>
</ul></li>
<li><a href="#extensions">Extensions</a></li>
<li><a href="#contributing">Contributing</a></li>
<li><a href="#compatibility">Compatibility</a></li>
<li><a href="#versioning">Versioning</a></li>
<li><a href="#team">Team</a></li>
<li><a href="#copyrightlicense">Copyright/License</a></li>
<li><a href="#about-thoughtbot">About thoughtbot</a></li>
</ul>

<h2 id="getting-started">Getting started</h2>

<h3 id="rspec">RSpec</h3>

<p>Start by including <code>shoulda-matchers</code> in your Gemfile:</p>

<pre class="code ruby"><code class="ruby"><span class="n">group</span> <span class="ss">:test</span> <span class="k">do</span>
  <span class="n">gem</span> <span class="s1">'shoulda-matchers'</span><span class="p">,</span> <span class="s1">'~&gt; 6.0'</span>
<span class="k">end</span>
</code></pre>

<p>Then run <code>bundle install</code>.</p>

<p>Now you need to configure the gem by telling it:</p>

<ul>
<li>which matchers you want to use in your tests</li>
<li>that you&#39;re using RSpec so that it can make those matchers available in
your example groups</li>
</ul>

<h4 id="rails-apps">Rails apps</h4>

<p>If you&#39;re working on a Rails app, simply place this at the bottom of
<code>spec/rails_helper.rb</code> (or in a support file if you so choose):</p>

<pre class="code ruby"><code class="ruby"><span class="no">Shoulda</span><span class="o">::</span><span class="no">Matchers</span><span class="p">.</span><span class="nf">configure</span> <span class="k">do</span> <span class="o">|</span><span class="n">config</span><span class="o">|</span>
  <span class="n">config</span><span class="p">.</span><span class="nf">integrate</span> <span class="k">do</span> <span class="o">|</span><span class="n">with</span><span class="o">|</span>
    <span class="n">with</span><span class="p">.</span><span class="nf">test_framework</span> <span class="ss">:rspec</span>
    <span class="n">with</span><span class="p">.</span><span class="nf">library</span> <span class="ss">:rails</span>
  <span class="k">end</span>
<span class="k">end</span>
</code></pre>

<h4 id="non-rails-apps">Non-Rails apps</h4>

<p>If you&#39;re not working on a Rails app, but you still make use of ActiveRecord or
ActiveModel in your project, you can still use this gem too! In that case,
you&#39;ll want to place the following configuration at the bottom of
<code>spec/spec_helper.rb</code>:</p>

<pre class="code ruby"><code class="ruby"><span class="no">Shoulda</span><span class="o">::</span><span class="no">Matchers</span><span class="p">.</span><span class="nf">configure</span> <span class="k">do</span> <span class="o">|</span><span class="n">config</span><span class="o">|</span>
  <span class="n">config</span><span class="p">.</span><span class="nf">integrate</span> <span class="k">do</span> <span class="o">|</span><span class="n">with</span><span class="o">|</span>
    <span class="n">with</span><span class="p">.</span><span class="nf">test_framework</span> <span class="ss">:rspec</span>

    <span class="c1"># Keep as many of these lines as are necessary:</span>
    <span class="n">with</span><span class="p">.</span><span class="nf">library</span> <span class="ss">:active_record</span>
    <span class="n">with</span><span class="p">.</span><span class="nf">library</span> <span class="ss">:active_model</span>
  <span class="k">end</span>
<span class="k">end</span>
</code></pre>

<h3 id="minitest">Minitest</h3>

<p>If you&#39;re using our umbrella gem <a href="https://github.com/thoughtbot/shoulda">Shoulda</a>, then make sure that you&#39;re using the
latest version:</p>

<pre class="code ruby"><code class="ruby"><span class="n">group</span> <span class="ss">:test</span> <span class="k">do</span>
  <span class="n">gem</span> <span class="s1">'shoulda'</span><span class="p">,</span> <span class="s1">'~&gt; 4.0'</span>
<span class="k">end</span>
</code></pre>

<p>Otherwise, add <code>shoulda-matchers</code> to your Gemfile:</p>

<pre class="code ruby"><code class="ruby"><span class="n">group</span> <span class="ss">:test</span> <span class="k">do</span>
  <span class="n">gem</span> <span class="s1">'shoulda-matchers'</span><span class="p">,</span> <span class="s1">'~&gt; 6.0'</span>
<span class="k">end</span>
</code></pre>

<p>Then run <code>bundle install</code>.</p>

<p>Now you need to configure the gem by telling it:</p>

<ul>
<li>which matchers you want to use in your tests</li>
<li>that you&#39;re using Minitest so that it can make those matchers available in
your test case classes</li>
</ul>

<h4 id="rails-apps">Rails apps</h4>

<p>If you&#39;re working on a Rails app, simply place this at the bottom of
<code>test/test_helper.rb</code>:</p>

<pre class="code ruby"><code class="ruby"><span class="no">Shoulda</span><span class="o">::</span><span class="no">Matchers</span><span class="p">.</span><span class="nf">configure</span> <span class="k">do</span> <span class="o">|</span><span class="n">config</span><span class="o">|</span>
  <span class="n">config</span><span class="p">.</span><span class="nf">integrate</span> <span class="k">do</span> <span class="o">|</span><span class="n">with</span><span class="o">|</span>
    <span class="n">with</span><span class="p">.</span><span class="nf">test_framework</span> <span class="ss">:minitest</span>
    <span class="n">with</span><span class="p">.</span><span class="nf">library</span> <span class="ss">:rails</span>
  <span class="k">end</span>
<span class="k">end</span>
</code></pre>

<h4 id="non-rails-apps">Non-Rails apps</h4>

<p>If you&#39;re not working on a Rails app, but you still make use of ActiveRecord or
ActiveModel in your project, you can still use this gem too! In that case,
you&#39;ll want to place the following configuration at the bottom of
<code>test/test_helper.rb</code>:</p>

<pre class="code ruby"><code class="ruby"><span class="no">Shoulda</span><span class="o">::</span><span class="no">Matchers</span><span class="p">.</span><span class="nf">configure</span> <span class="k">do</span> <span class="o">|</span><span class="n">config</span><span class="o">|</span>
  <span class="n">config</span><span class="p">.</span><span class="nf">integrate</span> <span class="k">do</span> <span class="o">|</span><span class="n">with</span><span class="o">|</span>
    <span class="n">with</span><span class="p">.</span><span class="nf">test_framework</span> <span class="ss">:minitest</span>

    <span class="c1"># Keep as many of these lines as are necessary:</span>
    <span class="n">with</span><span class="p">.</span><span class="nf">library</span> <span class="ss">:active_record</span>
    <span class="n">with</span><span class="p">.</span><span class="nf">library</span> <span class="ss">:active_model</span>
  <span class="k">end</span>
<span class="k">end</span>
</code></pre>

<h2 id="usage">Usage</h2>

<p>Most of the matchers provided by this gem are useful in a Rails context, and as
such, can be used for different parts of a Rails app:</p>

<ul>
<li><a href="#activerecord-matchers">database models backed by ActiveRecord</a></li>
<li><a href="#activemodel-matchers">non-database models, form objects, etc. backed by
ActiveModel</a></li>
<li><a href="#actioncontroller-matchers">controllers</a></li>
<li><a href="#routing-matchers">routes</a> (RSpec only)</li>
<li><a href="#independent-matchers">Rails-specific features like <code>delegate</code></a></li>
</ul>

<p>As the name of the gem indicates, most matchers are designed to be used in
&quot;one-liner&quot; form using the <code>should</code> macro, a special directive available in both
RSpec and <a href="https://github.com/thoughtbot/shoulda">Shoulda</a>. For instance, a model test case may look something like:</p>

<pre class="code ruby"><code class="ruby"><span class="c1"># RSpec</span>
<span class="no">RSpec</span><span class="p">.</span><span class="nf">describe</span> <span class="no">MenuItem</span><span class="p">,</span> <span class="ss">type: :model</span> <span class="k">do</span>
  <span class="n">describe</span> <span class="s1">'associations'</span> <span class="k">do</span>
    <span class="n">it</span> <span class="p">{</span> <span class="n">should</span> <span class="n">belong_to</span><span class="p">(</span><span class="ss">:category</span><span class="p">).</span><span class="nf">class_name</span><span class="p">(</span><span class="s1">'MenuCategory'</span><span class="p">)</span> <span class="p">}</span>
  <span class="k">end</span>

  <span class="n">describe</span> <span class="s1">'validations'</span> <span class="k">do</span>
    <span class="n">it</span> <span class="p">{</span> <span class="n">should</span> <span class="n">validate_presence_of</span><span class="p">(</span><span class="ss">:name</span><span class="p">)</span> <span class="p">}</span>
    <span class="n">it</span> <span class="p">{</span> <span class="n">should</span> <span class="n">validate_uniqueness_of</span><span class="p">(</span><span class="ss">:name</span><span class="p">).</span><span class="nf">scoped_to</span><span class="p">(</span><span class="ss">:category_id</span><span class="p">)</span> <span class="p">}</span>
  <span class="k">end</span>
<span class="k">end</span>

<span class="c1"># Minitest (Shoulda)</span>
<span class="k">class</span> <span class="nc">MenuItemTest</span> <span class="o">&lt;</span> <span class="no">ActiveSupport</span><span class="o">::</span><span class="no">TestCase</span>
  <span class="n">context</span> <span class="s1">'associations'</span> <span class="k">do</span>
    <span class="n">should</span> <span class="n">belong_to</span><span class="p">(</span><span class="ss">:category</span><span class="p">).</span><span class="nf">class_name</span><span class="p">(</span><span class="s1">'MenuCategory'</span><span class="p">)</span>
  <span class="k">end</span>

  <span class="n">context</span> <span class="s1">'validations'</span> <span class="k">do</span>
    <span class="n">should</span> <span class="n">validate_presence_of</span><span class="p">(</span><span class="ss">:name</span><span class="p">)</span>
    <span class="n">should</span> <span class="n">validate_uniqueness_of</span><span class="p">(</span><span class="ss">:name</span><span class="p">).</span><span class="nf">scoped_to</span><span class="p">(</span><span class="ss">:category_id</span><span class="p">)</span>
  <span class="k">end</span>
<span class="k">end</span>
</code></pre>

<p><a href="#matchers">See below</a> for the full set of matchers that you can use.</p>

<h3 id="on-the-subject-of-subject">On the subject of <code>subject</code></h3>

<p>For both RSpec and Shoulda, the <strong>subject</strong> is an implicit reference to the
object under test, and through the use of <code>should</code> as demonstrated above, all of
the matchers make use of <code>subject</code> internally when they are run. A <code>subject</code> is
always set automatically by your test framework in any given test case; however,
in certain cases it can be advantageous to override it. For instance, when
testing validations in a model, it is customary to provide a valid model instead
of a fresh one:</p>

<pre class="code ruby"><code class="ruby"><span class="c1"># RSpec</span>
<span class="no">RSpec</span><span class="p">.</span><span class="nf">describe</span> <span class="no">Post</span><span class="p">,</span> <span class="ss">type: :model</span> <span class="k">do</span>
  <span class="n">describe</span> <span class="s1">'validations'</span> <span class="k">do</span>
    <span class="c1"># Here we're using FactoryBot, but you could use anything</span>
    <span class="n">subject</span> <span class="p">{</span> <span class="n">build</span><span class="p">(</span><span class="ss">:post</span><span class="p">)</span> <span class="p">}</span>

    <span class="n">it</span> <span class="p">{</span> <span class="n">should</span> <span class="n">validate_presence_of</span><span class="p">(</span><span class="ss">:title</span><span class="p">)</span> <span class="p">}</span>
  <span class="k">end</span>
<span class="k">end</span>

<span class="c1"># Minitest (Shoulda)</span>
<span class="k">class</span> <span class="nc">PostTest</span> <span class="o">&lt;</span> <span class="no">ActiveSupport</span><span class="o">::</span><span class="no">TestCase</span>
  <span class="n">context</span> <span class="s1">'validations'</span> <span class="k">do</span>
    <span class="n">subject</span> <span class="p">{</span> <span class="n">build</span><span class="p">(</span><span class="ss">:post</span><span class="p">)</span> <span class="p">}</span>

    <span class="n">should</span> <span class="n">validate_presence_of</span><span class="p">(</span><span class="ss">:title</span><span class="p">)</span>
  <span class="k">end</span>
<span class="k">end</span>
</code></pre>

<p>When overriding the subject in this manner, then, it&#39;s important to provide the
correct object. <strong>When in doubt, provide an instance of the class under test.</strong>
This is particularly necessary for controller tests, where it is easy to
accidentally write something like:</p>

<pre class="code ruby"><code class="ruby"><span class="no">RSpec</span><span class="p">.</span><span class="nf">describe</span> <span class="no">PostsController</span><span class="p">,</span> <span class="ss">type: :controller</span> <span class="k">do</span>
  <span class="n">describe</span> <span class="s1">'GET #index'</span> <span class="k">do</span>
    <span class="n">subject</span> <span class="p">{</span> <span class="n">get</span> <span class="ss">:index</span> <span class="p">}</span>

    <span class="c1"># This may work...</span>
    <span class="n">it</span> <span class="p">{</span> <span class="n">should</span> <span class="n">have_http_status</span><span class="p">(</span><span class="ss">:success</span><span class="p">)</span> <span class="p">}</span>
    <span class="c1"># ...but this will not!</span>
    <span class="n">it</span> <span class="p">{</span> <span class="n">should</span> <span class="n">permit</span><span class="p">(</span><span class="ss">:title</span><span class="p">,</span> <span class="ss">:body</span><span class="p">).</span><span class="nf">for</span><span class="p">(</span><span class="ss">:post</span><span class="p">)</span> <span class="p">}</span>
  <span class="k">end</span>
<span class="k">end</span>
</code></pre>

<p>In this case, you would want to use <code>before</code> rather than <code>subject</code>:</p>

<pre class="code ruby"><code class="ruby"><span class="no">RSpec</span><span class="p">.</span><span class="nf">describe</span> <span class="no">PostsController</span><span class="p">,</span> <span class="ss">type: :controller</span> <span class="k">do</span>
  <span class="n">describe</span> <span class="s1">'GET #index'</span> <span class="k">do</span>
    <span class="n">before</span> <span class="p">{</span> <span class="n">get</span> <span class="ss">:index</span> <span class="p">}</span>

    <span class="c1"># Notice that we have to assert have_http_status on the response here...</span>
    <span class="n">it</span> <span class="p">{</span> <span class="n">expect</span><span class="p">(</span><span class="n">response</span><span class="p">).</span><span class="nf">to</span> <span class="n">have_http_status</span><span class="p">(</span><span class="ss">:success</span><span class="p">)</span> <span class="p">}</span>
    <span class="c1"># ...but we do not have to provide a subject for render_template</span>
    <span class="n">it</span> <span class="p">{</span> <span class="n">should</span> <span class="n">render_template</span><span class="p">(</span><span class="s1">'index'</span><span class="p">)</span> <span class="p">}</span>
  <span class="k">end</span>
<span class="k">end</span>
</code></pre>

<h3 id="availability-of-rspec-matchers-in-example-groups">Availability of RSpec matchers in example groups</h3>

<h4 id="rails-projects">Rails projects</h4>

<p>If you&#39;re using RSpec, then you&#39;re probably familiar with the concept of example
groups. Example groups can be assigned tags to assign different behaviors
to different kinds of example groups. This comes into play especially when using
<code>rspec-rails</code>, where, for instance, controller example groups, tagged with
<code>type: :controller</code>, are written differently than request example groups, tagged
with <code>type: :request</code>. This difference in writing style arises because
<code>rspec-rails</code> mixes different behaviors and methods into controller example
groups vs. request example groups.</p>

<p>Relying on this behavior, Shoulda Matchers automatically makes certain matchers
available in certain kinds of example groups:</p>

<ul>
<li>ActiveRecord and ActiveModel matchers are available only in model example
groups, i.e., those tagged with <code>type: :model</code> or in files located under
<code>spec/models</code>.</li>
<li>ActionController matchers are available only in controller example groups,
i.e., those tagged with <code>type: :controller</code> or in files located under
<code>spec/controllers</code>.</li>
<li>The <code>route</code> matcher is available in routing example groups, i.e., those
tagged with <code>type: :routing</code> or in files located under <code>spec/routing</code>.</li>
<li>Independent matchers are available in all example groups.</li>
</ul>

<p>As long as you&#39;re using Rails, you don&#39;t need to worry about these details â€”
everything should &quot;just work&quot;.</p>

<h4 id="non-rails-projects">Non-Rails projects</h4>

<p><strong>What if you are using ActiveModel or ActiveRecord outside of Rails, however,
and you want to use model matchers in a certain example group?</strong> Then you&#39;ll
need to manually include the module that holds those matchers into that example
group. For instance, you might have to say:</p>

<pre class="code ruby"><code class="ruby"><span class="no">RSpec</span><span class="p">.</span><span class="nf">describe</span> <span class="no">MySpecialModel</span> <span class="k">do</span>
  <span class="kp">include</span> <span class="no">Shoulda</span><span class="o">::</span><span class="no">Matchers</span><span class="o">::</span><span class="no">ActiveModel</span>
  <span class="kp">include</span> <span class="no">Shoulda</span><span class="o">::</span><span class="no">Matchers</span><span class="o">::</span><span class="no">ActiveRecord</span>
<span class="k">end</span>
</code></pre>

<p>If you have a lot of similar example groups in which you need to do this, then
you might find it more helpful to tag your example groups appropriately, then
instruct RSpec to mix these modules into any example groups that have that tag.
For instance, you could add this to your <code>rails_helper.rb</code>:</p>

<pre class="code ruby"><code class="ruby"><span class="no">RSpec</span><span class="p">.</span><span class="nf">configure</span> <span class="k">do</span> <span class="o">|</span><span class="n">config</span><span class="o">|</span>
  <span class="n">config</span><span class="p">.</span><span class="nf">include</span><span class="p">(</span><span class="no">Shoulda</span><span class="o">::</span><span class="no">Matchers</span><span class="o">::</span><span class="no">ActiveModel</span><span class="p">,</span> <span class="ss">type: :model</span><span class="p">)</span>
  <span class="n">config</span><span class="p">.</span><span class="nf">include</span><span class="p">(</span><span class="no">Shoulda</span><span class="o">::</span><span class="no">Matchers</span><span class="o">::</span><span class="no">ActiveRecord</span><span class="p">,</span> <span class="ss">type: :model</span><span class="p">)</span>
<span class="k">end</span>
</code></pre>

<p>And from then on, you could say:</p>

<pre class="code ruby"><code class="ruby"><span class="no">RSpec</span><span class="p">.</span><span class="nf">describe</span> <span class="no">MySpecialModel</span><span class="p">,</span> <span class="ss">type: :model</span> <span class="k">do</span>
  <span class="c1"># ...</span>
<span class="k">end</span>
</code></pre>

<h3 id="should-vs-is_expected-to"><code>should</code> vs <code>is_expected.to</code></h3>

<p>In this README and throughout the documentation, you&#39;ll notice that we use the
<code>should</code> form of RSpec&#39;s one-liner syntax over <code>is_expected.to</code>. Besides being
the namesake of the gem itself, this is our preferred syntax as it&#39;s short and
sweet. But if you prefer to use <code>is_expected.to</code>, you can do that too:</p>

<pre class="code ruby"><code class="ruby"><span class="no">RSpec</span><span class="p">.</span><span class="nf">describe</span> <span class="no">Person</span><span class="p">,</span> <span class="ss">type: :model</span> <span class="k">do</span>
  <span class="n">it</span> <span class="p">{</span> <span class="n">is_expected</span><span class="p">.</span><span class="nf">to</span> <span class="n">validate_presence_of</span><span class="p">(</span><span class="ss">:name</span><span class="p">)</span> <span class="p">}</span>
<span class="k">end</span>
</code></pre>

<h3 id="a-note-on-testing-style">A Note on Testing Style</h3>

<p>If you inspect the source code, you&#39;ll notice quickly that <code>shoulda-matchers</code>
is largely implemented using reflections and other introspection methods that
Rails provides. At first sight, this might seem to go against the common
practice of testing behavior rather than implementation. However, as the
available matchers indicate, we recommend that you treat <code>shoulda-matchers</code> as
a tool to help you ensure correct configuration and adherence to best practices
and idiomatic Rails in your models and controllers - especially for aspects
that in your experience are often insufficiently tested, such as ActiveRecord
validations or controller callbacks (a.k.a. the &quot;framework-y&quot; parts).</p>

<p>For testing your application&#39;s unique business logic, however, we recommend focusing on
behavior and outcomes over implementation details. This approach will better support
refactoring and ensure that your tests remain resilient to changes in how your code
is structured. While no generalized testing tool can fully capture the nuances of your
specific domain, you can draw inspiration from shoulda-matchers to write custom
matchers that align more closely with your application&#39;s needs.</p>

<h2 id="matchers">Matchers</h2>

<p>Here is the full list of matchers that ship with this gem. If you need details
about any of them, make sure to <a href="https://matchers.shoulda.io/docs">consult the documentation</a>!</p>

<h3 id="activemodel-matchers">ActiveModel matchers</h3>

<ul>
<li><strong><span class='object_link'><a href="Shoulda/Matchers/ActiveModel.html#allow_value-instance_method" title="Shoulda::Matchers::ActiveModel#allow_value (method)">allow_value</a></span></strong>
tests that an attribute is valid or invalid if set to one or more values.
<em>(Aliased as #allow_values.)</em></li>
<li><strong><span class='object_link'><a href="Shoulda/Matchers/ActiveModel.html#have_secure_password-instance_method" title="Shoulda::Matchers::ActiveModel#have_secure_password (method)">have_secure_password</a></span></strong>
tests usage of <code>has_secure_password</code>.</li>
<li><strong><span class='object_link'><a href="Shoulda/Matchers/ActiveModel.html#validate_absence_of-instance_method" title="Shoulda::Matchers::ActiveModel#validate_absence_of (method)">validate_absence_of</a></span></strong>
tests usage of <code>validates_absence_of</code>.</li>
<li><strong><span class='object_link'><a href="Shoulda/Matchers/ActiveModel.html#validate_acceptance_of-instance_method" title="Shoulda::Matchers::ActiveModel#validate_acceptance_of (method)">validate_acceptance_of</a></span></strong>
tests usage of <code>validates_acceptance_of</code>.</li>
<li><strong><span class='object_link'><a href="Shoulda/Matchers/ActiveModel.html#validate_confirmation_of-instance_method" title="Shoulda::Matchers::ActiveModel#validate_confirmation_of (method)">validate_confirmation_of</a></span></strong>
tests usage of <code>validates_confirmation_of</code>.</li>
<li><strong><span class='object_link'><a href="Shoulda/Matchers/ActiveModel.html#validate_exclusion_of-instance_method" title="Shoulda::Matchers::ActiveModel#validate_exclusion_of (method)">validate_exclusion_of</a></span></strong>
tests usage of <code>validates_exclusion_of</code>.</li>
<li><strong><span class='object_link'><a href="Shoulda/Matchers/ActiveModel.html#validate_inclusion_of-instance_method" title="Shoulda::Matchers::ActiveModel#validate_inclusion_of (method)">validate_inclusion_of</a></span></strong>
tests usage of <code>validates_inclusion_of</code>.</li>
<li><strong><span class='object_link'><a href="Shoulda/Matchers/ActiveModel.html#validate_length_of-instance_method" title="Shoulda::Matchers::ActiveModel#validate_length_of (method)">validate_length_of</a></span></strong>
tests usage of <code>validates_length_of</code>.</li>
<li><strong><span class='object_link'><a href="Shoulda/Matchers/ActiveModel.html#validate_numericality_of-instance_method" title="Shoulda::Matchers::ActiveModel#validate_numericality_of (method)">validate_numericality_of</a></span></strong>
tests usage of <code>validates_numericality_of</code>.</li>
<li><strong><span class='object_link'><a href="Shoulda/Matchers/ActiveModel.html#validate_presence_of-instance_method" title="Shoulda::Matchers::ActiveModel#validate_presence_of (method)">validate_presence_of</a></span></strong>
tests usage of <code>validates_presence_of</code>.</li>
<li><strong><span class='object_link'><a href="Shoulda/Matchers/ActiveModel.html#validate_comparison_of-instance_method" title="Shoulda::Matchers::ActiveModel#validate_comparison_of (method)">validate_comparison_of</a></span></strong>
tests usage of <code>validates_comparison_of</code>.</li>
</ul>

<h3 id="activerecord-matchers">ActiveRecord matchers</h3>

<ul>
<li><strong><span class='object_link'><a href="Shoulda/Matchers/ActiveRecord.html#accept_nested_attributes_for-instance_method" title="Shoulda::Matchers::ActiveRecord#accept_nested_attributes_for (method)">accept_nested_attributes_for</a></span></strong>
tests usage of the <code>accepts_nested_attributes_for</code> macro.</li>
<li><strong><span class='object_link'><a href="Shoulda/Matchers/ActiveRecord.html#belong_to-instance_method" title="Shoulda::Matchers::ActiveRecord#belong_to (method)">belong_to</a></span></strong>
tests your <code>belongs_to</code> associations.</li>
<li><strong><span class='object_link'><a href="Shoulda/Matchers/ActiveRecord.html#define_enum_for-instance_method" title="Shoulda::Matchers::ActiveRecord#define_enum_for (method)">define_enum_for</a></span></strong>
tests usage of the <code>enum</code> macro.</li>
<li><strong><span class='object_link'><a href="Shoulda/Matchers/ActiveRecord.html#have_and_belong_to_many-instance_method" title="Shoulda::Matchers::ActiveRecord#have_and_belong_to_many (method)">have_and_belong_to_many</a></span></strong>
tests your <code>has_and_belongs_to_many</code> associations.</li>
<li><strong><span class='object_link'><a href="Shoulda/Matchers/ActiveRecord.html#have_delegated_type-instance_method" title="Shoulda::Matchers::ActiveRecord#have_delegated_type (method)">have_delegated_type</a></span></strong>
tests usage of the <code>delegated_type</code> macro.</li>
<li><strong><span class='object_link'><a href="Shoulda/Matchers/ActiveRecord.html#have_db_column-instance_method" title="Shoulda::Matchers::ActiveRecord#have_db_column (method)">have_db_column</a></span></strong>
tests that the table that backs your model has a specific column.</li>
<li><strong><span class='object_link'><a href="Shoulda/Matchers/ActiveRecord.html#have_db_index-instance_method" title="Shoulda::Matchers::ActiveRecord#have_db_index (method)">have_db_index</a></span></strong>
tests that the table that backs your model has an index on a specific column.</li>
<li><strong><span class='object_link'><a href="Shoulda/Matchers/ActiveRecord.html#have_implicit_order_column-instance_method" title="Shoulda::Matchers::ActiveRecord#have_implicit_order_column (method)">have_implicit_order_column</a></span></strong>
tests usage of <code>implicit_order_column</code>.</li>
<li><strong><span class='object_link'><a href="Shoulda/Matchers/ActiveRecord.html#have_many-instance_method" title="Shoulda::Matchers::ActiveRecord#have_many (method)">have_many</a></span></strong>
tests your <code>has_many</code> associations.</li>
<li><strong><span class='object_link'><a href="Shoulda/Matchers/ActiveRecord.html#have_many_attached-instance_method" title="Shoulda::Matchers::ActiveRecord#have_many_attached (method)">have_many_attached</a></span></strong>
tests your <code>has_many_attached</code> associations.</li>
<li><strong><span class='object_link'><a href="Shoulda/Matchers/ActiveRecord.html#have_one-instance_method" title="Shoulda::Matchers::ActiveRecord#have_one (method)">have_one</a></span></strong>
tests your <code>has_one</code> associations.</li>
<li><strong><span class='object_link'><a href="Shoulda/Matchers/ActiveRecord.html#have_one_attached-instance_method" title="Shoulda::Matchers::ActiveRecord#have_one_attached (method)">have_one_attached</a></span></strong>
tests your <code>has_one_attached</code> associations.</li>
<li><strong><span class='object_link'><a href="Shoulda/Matchers/ActiveRecord.html#have_readonly_attribute-instance_method" title="Shoulda::Matchers::ActiveRecord#have_readonly_attribute (method)">have_readonly_attribute</a></span></strong>
tests usage of the <code>attr_readonly</code> macro.</li>
<li><strong><span class='object_link'><a href="Shoulda/Matchers/ActiveRecord.html#have_rich_text-instance_method" title="Shoulda::Matchers::ActiveRecord#have_rich_text (method)">have_rich_text</a></span></strong>
tests your <code>has_rich_text</code> associations.</li>
<li><strong><span class='object_link'><a href="Shoulda/Matchers/ActiveRecord.html#serialize-instance_method" title="Shoulda::Matchers::ActiveRecord#serialize (method)">serialize</a></span></strong> tests
usage of the <code>serialize</code> macro.</li>
<li><strong><span class='object_link'><a href="Shoulda/Matchers/ActiveRecord.html#validate_uniqueness_of-instance_method" title="Shoulda::Matchers::ActiveRecord#validate_uniqueness_of (method)">validate_uniqueness_of</a></span></strong>
tests usage of <code>validates_uniqueness_of</code>.</li>
<li><strong><span class='object_link'><a href="Shoulda/Matchers/ActiveRecord.html#normalize-instance_method" title="Shoulda::Matchers::ActiveRecord#normalize (method)">normalize</a></span></strong> tests
usage of the <code>normalize</code> macro</li>
<li><strong><span class='object_link'><a href="Shoulda/Matchers/ActiveRecord.html#encrypt-instance_method" title="Shoulda::Matchers::ActiveRecord#encrypt (method)">encrypt</a></span></strong>
tests usage of the <code>encrypts</code> macro.</li>
</ul>

<h3 id="actioncontroller-matchers">ActionController matchers</h3>

<ul>
<li><strong><span class='object_link'><a href="Shoulda/Matchers/ActionController.html#filter_param-instance_method" title="Shoulda::Matchers::ActionController#filter_param (method)">filter_param</a></span></strong>
tests parameter filtering configuration.</li>
<li><strong><span class='object_link'><a href="Shoulda/Matchers/ActionController.html#permit-instance_method" title="Shoulda::Matchers::ActionController#permit (method)">permit</a></span></strong> tests
that an action restricts the <code>params</code> hash.</li>
<li><strong><span class='object_link'><a href="Shoulda/Matchers/ActionController.html#redirect_to-instance_method" title="Shoulda::Matchers::ActionController#redirect_to (method)">redirect_to</a></span></strong>
tests that an action redirects to a certain location.</li>
<li><strong><span class='object_link'><a href="Shoulda/Matchers/ActionController.html#render_template-instance_method" title="Shoulda::Matchers::ActionController#render_template (method)">render_template</a></span></strong>
tests that an action renders a template.</li>
<li><strong><span class='object_link'><a href="Shoulda/Matchers/ActionController.html#render_with_layout-instance_method" title="Shoulda::Matchers::ActionController#render_with_layout (method)">render_with_layout</a></span></strong>
tests that an action is rendered with a certain layout.</li>
<li><strong><span class='object_link'><a href="Shoulda/Matchers/ActionController.html#rescue_from-instance_method" title="Shoulda::Matchers::ActionController#rescue_from (method)">rescue_from</a></span></strong>
tests usage of the <code>rescue_from</code> macro.</li>
<li><strong><span class='object_link'><a href="Shoulda/Matchers/ActionController.html#respond_with-instance_method" title="Shoulda::Matchers::ActionController#respond_with (method)">respond_with</a></span></strong>
tests that an action responds with a certain status code.</li>
<li><strong><span class='object_link'><a href="Shoulda/Matchers/ActionController.html#route-instance_method" title="Shoulda::Matchers::ActionController#route (method)">route</a></span></strong> tests
your routes.</li>
<li><strong><span class='object_link'><a href="Shoulda/Matchers/ActionController.html#set_session-instance_method" title="Shoulda::Matchers::ActionController#set_session (method)">set_session</a></span></strong>
makes assertions on the <code>session</code> hash.</li>
<li><strong><span class='object_link'><a href="Shoulda/Matchers/ActionController.html#set_flash-instance_method" title="Shoulda::Matchers::ActionController#set_flash (method)">set_flash</a></span></strong>
makes assertions on the <code>flash</code> hash.</li>
<li><strong><span class='object_link'><a href="Shoulda/Matchers/ActionController.html#use_after_action-instance_method" title="Shoulda::Matchers::ActionController#use_after_action (method)">use_after_action</a></span></strong>
tests that an <code>after_action</code> callback is defined in your controller.</li>
<li><strong><span class='object_link'><a href="Shoulda/Matchers/ActionController.html#use_around_action-instance_method" title="Shoulda::Matchers::ActionController#use_around_action (method)">use_around_action</a></span></strong>
tests that an <code>around_action</code> callback is defined in your controller.</li>
<li><strong><span class='object_link'><a href="Shoulda/Matchers/ActionController.html#use_before_action-instance_method" title="Shoulda::Matchers::ActionController#use_before_action (method)">use_before_action</a></span></strong>
tests that a <code>before_action</code> callback is defined in your controller.</li>
</ul>

<h3 id="routing-matchers">Routing matchers</h3>

<ul>
<li><strong><span class='object_link'><a href="Shoulda/Matchers/ActionController.html#route-instance_method" title="Shoulda::Matchers::ActionController#route (method)">route</a></span></strong> tests
your routes.</li>
</ul>

<h3 id="independent-matchers">Independent matchers</h3>

<ul>
<li><strong><span class='object_link'><a href="Shoulda/Matchers/Independent.html#delegate_method-instance_method" title="Shoulda::Matchers::Independent#delegate_method (method)">delegate_method</a></span></strong>
tests that an object forwards messages to other, internal objects by way of
delegation.</li>
</ul>

<h2 id="extensions">Extensions</h2>

<p>Over time our community has created extensions to Shoulda Matchers. If you&#39;ve
created something that you want to share, please <a href="https://github.com/thoughtbot/shoulda-matchers/issues/new">let us know</a>!</p>

<ul>
<li><strong><a href="https://github.com/majioa/shoulda-matchers-cucumber">shoulda-matchers-cucumber</a></strong> â€“ Adds support for using Shoulda Matchers in
Cucumber tests.</li>
</ul>

<h2 id="contributing">Contributing</h2>

<p>Have a fix for a problem you&#39;ve been running into or an idea for a new feature
you think would be useful? Take a look at the <a href="CONTRIBUTING.md">Contributing
document</a> for instructions on setting up the repo on your
machine, understanding the codebase, and creating a good pull request.</p>

<h2 id="compatibility">Compatibility</h2>

<p>Shoulda Matchers is tested and supported against Ruby 3.0+, Rails
6.1+, RSpec 3.x, and Minitest 5.x.</p>

<ul>
<li>For Ruby &lt; 2.4 and Rails &lt; 4.1 compatibility, please use <a href="https://github.com/thoughtbot/shoulda-matchers/tree/v3.1.3">v3.1.3</a>.</li>
<li>For Ruby &lt; 3.0 and Rails &lt; 6.1 compatibility, please use <a href="https://github.com/thoughtbot/shoulda-matchers/tree/v4.5.1">v4.5.1</a>.</li>
</ul>

<h2 id="versioning">Versioning</h2>

<p>Shoulda Matchers follows Semantic Versioning 2.0 as defined at
<a href="https://semver.org">https://semver.org</a>.</p>

<h2 id="team">Team</h2>

<p>Shoulda Matchers is currently maintained by <a href="https://github.com/VSPPedro">Pedro Paiva</a> and <a href="https://github.com/matsales28">Matheus
Sales</a>. Previous maintainers include <a href="https://github.com/mcmire">Elliot Winkler</a>,
<a href="https://github.com/guialbuk">Gui Albuk</a>, <a href="https://github.com/drapergeek">Jason Draper</a>, <a href="https://github.com/mxie">Melissa Xie</a>,
<a href="https://github.com/gabebw">Gabe Berke-Williams</a>, <a href="https://github.com/rmm5t">Ryan McGeary</a>, <a href="https://github.com/jferris">Joe Ferris</a>, and
<a href="https://github.com/tammersaleh">Tammer Saleh</a>.</p>

<h2 id="copyright-license">Copyright/License</h2>

<p>Shoulda Matchers is copyright Â© Tammer Saleh and <a href="https://thoughtbot.com">thoughtbot,
inc</a>. It is free and open-source software and may be
redistributed under the terms specified in the <a href="LICENSE">LICENSE</a> file.</p>

<!-- START /templates/footer.md -->

<h2 id="about-thoughtbot">About thoughtbot</h2>

<p><img src="https://thoughtbot.com/thoughtbot-logo-for-readmes.svg" alt="thoughtbot"></p>

<p>This repo is maintained and funded by thoughtbot, inc.
The names and logos for thoughtbot are trademarks of thoughtbot, inc.</p>

<p>We love open source software!
See <a href="https://thoughtbot.com/community?utm_source=github">our other projects</a>.
We are <a href="https://thoughtbot.com/hire-us?utm_source=github">available for hire</a>.</p>

<!-- END /templates/footer.md -->
</div></div>

      <div id="footer">
  Generated on
  October 31, 2025
  by
  <a href="https://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">YARD</a>.
</div>

    </div>

  </body>
</html>
