<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="https://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>
  File: CHANGELOG
  
    &mdash; Documentation by YARD 0.9.34
  
</title>

  <link rel="stylesheet" href="css/solarized.css" type="text/css" />

  <link rel="stylesheet" href="css/bootstrap.css" type="text/css" />

  <link rel="stylesheet" href="css/global.css" type="text/css" />

  <link rel="stylesheet" href="css/style.css" type="text/css" />

  <link rel="stylesheet" href="css/common.css" type="text/css" />

<script type="text/javascript">
  pathId = "CHANGELOG";
  relpath = '';
</script>


  <script type="text/javascript" charset="utf-8" src="js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="js/jquery.stickyheaders.js"></script>

  <script type="text/javascript" charset="utf-8" src="js/underscore.min.js"></script>

  <script type="text/javascript" charset="utf-8" src="js/app.js"></script>


  </head>
  <body>
    <div id="header">
      <div class="header-row">
        <div id="menu">
  
    <span class="title">
      <a href="index.html" title="Home">Home</a>
    </span> &raquo;
  
  
    <span class="title">CHANGELOG</span>
  
</div>

        <div id="search" class="js-search">
  <ul>
    
      <li>
        <a href="class_list.html">
          Class List
        </a>
      </li>
    
      <li>
        <a href="method_list.html">
          Method List
        </a>
      </li>
    
      <li>
        <a href="file_list.html">
          File List
        </a>
      </li>
    
  </ul>

  <iframe id="search_frame" class="js-search-frame"></iframe>
</div>

        <div class="clear"></div>
      </div>
    </div>

    <div id="main">
      <div id="content"><div id='filecontents'><h1 id="changelog">Changelog</h1>

<h2 id="6-2-0-2024-03-15">6.2.0 - 2024-03-15</h2>

<h3 id="bug-fixes">Bug fixes</h3>

<ul>
<li>Allow beginless and endless ranges in validates_inclusion_of by @pjpires (<a href="https://github.com/thoughtbot/shoulda-matchers/pull/1615">#1615</a>)</li>
<li>Ensure uniqueness validation matcher works with STI by @matsales28 (<a href="https://github.com/thoughtbot/shoulda-matchers/pull/1610">#1610</a>)</li>
</ul>

<h3 id="features">Features</h3>

<ul>
<li>Add <code>against</code> method in allow_value matcher by @EduardoSCosta (<a href="https://github.com/thoughtbot/shoulda-matchers/pull/1543">#1543</a>)</li>
<li>Add support for <code>strict_loading</code> option in association matchers by @rhannequin and @laicuRoot (<a href="https://github.com/thoughtbot/shoulda-matchers/pull/1607">#1607</a>)</li>
<li>Add <code>have_delegated_type</code> matcher by @matsales28 (<a href="https://github.com/thoughtbot/shoulda-matchers/pull/1606">#1606</a>)</li>
<li>Add support for <code>foreign_type</code> qualifier on <code>AssociationMatcher</code> by @matsales28 (<a href="https://github.com/thoughtbot/shoulda-matchers/pull/1609">#1609</a>)</li>
</ul>

<h3 id="improvements">Improvements</h3>

<ul>
<li>Lazy load <code>ActionController</code> and <code>Routing</code> matchers for <code>ActionController::TestCase</code> by @ilianah (<a href="https://github.com/thoughtbot/shoulda-matchers/pull/1613">#1613</a>)</li>
<li>Call dynamic-readme reusable workflow by @stefannibrasil (<a href="https://github.com/thoughtbot/shoulda-matchers/pull/1617">#1617</a>)</li>
<li>Update dependencies by @matsales28 (<a href="https://github.com/thoughtbot/shoulda-matchers/pull/1611">#1611</a>)</li>
<li>Fix inline documentation for <code>is_greater_than</code> in <code>validate_comparison_of</code> matcher by @jeduardo824 (<a href="https://github.com/thoughtbot/shoulda-matchers/pull/1616">#1616</a>)</li>
<li>Fix forgotten colon in documentation by @hotoolong (<a href="https://github.com/thoughtbot/shoulda-matchers/pull/1612">#1612</a>)</li>
</ul>

<h2 id="6-1-0-2024-01-19">6.1.0 - 2024-01-19</h2>

<h3 id="bug-fixes">Bug fixes</h3>

<ul>
<li>Fix negative form of <code>validate_numericality</code> matcher by @matsales28 (<a href="https://github.com/thoughtbot/shoulda-matchers/pull/1603">#1603</a>)</li>
</ul>

<h3 id="features">Features</h3>

<ul>
<li>Add support for negated matcher on have_secure_password matcher by @amalrik (<a href="https://github.com/thoughtbot/shoulda-matchers/pull/1593">#1593</a>)</li>
<li>Add <code>encrypt</code> matcher to test usage of the <code>encrypts</code> macro by @theforestvn88 (<a href="https://github.com/thoughtbot/shoulda-matchers/pull/1581">#1581</a>)</li>
<li>Add <code>query_constraints</code> qualifier on the association matchers by @matsales28 (<a href="https://github.com/thoughtbot/shoulda-matchers/pull/1604">#1604</a>)</li>
</ul>

<h3 id="improvements">Improvements</h3>

<ul>
<li>Remove <code>array_column?</code> helper from <code>ValidateAbsenceOfMatcher</code> by @jarenas9539 (<a href="https://github.com/thoughtbot/shoulda-matchers/pull/1562">#1562</a>)</li>
<li>Bump rubocop version to 1.59.0 by @VSPPedro (<a href="https://github.com/thoughtbot/shoulda-matchers/pull/1600">#1600</a>)</li>
<li>Update Ruby version to 3.3.0 by @VSSPedro(<a href="https://github.com/thoughtbot/shoulda-matchers/pull/1599">#1599</a>)</li>
<li>Fix <code>REPRODUCTION_SCRIPT.md</code> link returning 404 by @VSPPedro (<a href="https://github.com/thoughtbot/shoulda-matchers/pull/1602">#1602</a>)</li>
<li>Add support for globally enabled frozen-string-literals by @amalrik (<a href="https://github.com/thoughtbot/shoulda-matchers/pull/1598">#1598</a>)</li>
<li>Adjust typos in the documentation by @matsales28 (<a href="https://github.com/thoughtbot/shoulda-matchers/pull/1597">#1597</a>)</li>
</ul>

<h2 id="6-0-0-2023-12-22">6.0.0 - 2023-12-22</h2>

<h3 id="backward-incompatible-changes">Backward-incompatible changes</h3>

<ul>
<li>Drop support for Rails 5.2 and 6.0 as well as Ruby 2.6 and 2.7 they&#39;ve been end-of-lifed by @dougmrqs and @HeitorMC.
The gem now supports Ruby 3.0+ and Rails 6.1+. (<a href="https://github.com/thoughtbot/shoulda-matchers/pull/1521">#1521</a>, <a href="https://github.com/thoughtbot/shoulda-matchers/pull/1522">#1522</a>, <a href="https://github.com/thoughtbot/shoulda-matchers/pull/1547">#1547</a>, <a href="https://github.com/thoughtbot/shoulda-matchers/pull/1548">#1548</a>)</li>
</ul>

<h3 id="bug-fixes">Bug fixes</h3>

<ul>
<li>Fix validate_uniqueness_of matcher not supporting column of the type timestampz by @callahat. (<a href="https://github.com/thoughtbot/shoulda-matchers/pull/1544">#1544</a>)</li>
<li>Ensure that validation specs work for ActiveModel without ActiveRecord by @stonefield. (<a href="https://github.com/thoughtbot/shoulda-matchers/pull/1580">#1580</a>)</li>
</ul>

<h3 id="features">Features</h3>

<ul>
<li>Add normalize matcher by @stephannv. (<a href="https://github.com/thoughtbot/shoulda-matchers/pull/1558">#1558</a>)</li>
<li>Add validates_comparison_of matcher by @matsales28. (<a href="https://github.com/thoughtbot/shoulda-matchers/pull/1552">#1552</a>)</li>
<li>Add support for Ruby 3.2 by @petergoldstein. (<a href="https://github.com/thoughtbot/shoulda-matchers/pull/1536">#1536</a>)</li>
<li>Add support for Ruby 3.3.0-rc1 by @mtasaka and @VSPPedro. ([#1579], <a href="https://github.com/thoughtbot/shoulda-matchers/pull/1588">#1588</a>)</li>
<li>Add support for Rails 7.1 by @matsales28. (<a href="https://github.com/thoughtbot/shoulda-matchers/pull/1573">#1573</a>)</li>
<li>Add support for array attributes on validate_length_of matcher by @jarenas9539. <a href="https://github.com/thoughtbot/shoulda-matchers/pull/1560">#1560</a></li>
<li>Allow length validation on associations by @matsales28. (<a href="https://github.com/thoughtbot/shoulda-matchers/pull/1569">#1569</a>)</li>
<li>Improve have_db_index to better handle columns with multiple indexes by @abrom. (<a href="https://github.com/thoughtbot/shoulda-matchers/pull/1542">#1542</a>)</li>
<li>Implement of_sql_type qualifier on have_db_column matcher by @matsales28. (<a href="https://github.com/thoughtbot/shoulda-matchers/pull/1555">#1555</a>)</li>
</ul>

<h3 id="improvements">Improvements</h3>

<ul>
<li>When an unrelated error is seen with negated allow_value, give a hint by @matsales28. (<a href="https://github.com/thoughtbot/shoulda-matchers/pull/1570">#1570</a>)</li>
</ul>

<h2 id="5-3-0-2022-12-16">5.3.0 - 2022-12-16</h2>

<h3 id="features">Features</h3>

<ul>
<li><p>Add <code>in: range</code> matcher to validate_numericality_of. (<a href="https://github.com/thoughtbot/shoulda-matchers/pull/1512">#1512</a>)</p></li>
<li><p>Support :uuid column type for validate_absence_of matcher. (<a href="https://github.com/thoughtbot/shoulda-matchers/pull/1518">#1518</a>)</p></li>
</ul>

<h3 id="bug-fixes">Bug fixes</h3>

<ul>
<li>Fix confusing error message from validate_inclusion_of matcher when used against a polymorphic association. (<a href="https://github.com/thoughtbot/shoulda-matchers/pull/1523">#1523</a>)</li>
</ul>

<h2 id="5-2-0-2022-09-15">5.2.0 - 2022-09-15</h2>

<h3 id="features">Features</h3>

<ul>
<li><p>Add without_scopes method to enum matcher. (<a href="https://github.com/thoughtbot/shoulda-matchers/pull/1453">#1453</a>)</p></li>
<li><p>Add support for Ruby 3.1. (<a href="https://github.com/thoughtbot/shoulda-matchers/pull/1474">#1474</a>)</p></li>
<li><p>Add allow_blank method to validate_presence_of matcher. (<a href="https://github.com/thoughtbot/shoulda-matchers/pull/1499">#1499</a>)</p></li>
<li><p>Add support for Rails 7.0. No new Rails 7.0 features are supported, but only
existing features that broke with the upgrade. (<a href="https://github.com/thoughtbot/shoulda-matchers/pull/1506">#1506</a>)</p></li>
</ul>

<h2 id="5-1-0-2021-12-22">5.1.0 - 2021-12-22</h2>

<h3 id="bug-fixes">Bug fixes</h3>

<ul>
<li>Fix the undefined method error for non rails project due to use of many? - method from ActiveSupport. (<a href="https://github.com/thoughtbot/shoulda-matchers/pull/1459">#1459</a>)</li>
</ul>

<h3 id="features">Features</h3>

<ul>
<li><p>Add array option support for have db column matcher. (<a href="https://github.com/thoughtbot/shoulda-matchers/pull/1465">#1465</a>)</p></li>
<li><p>Add enum attributes support for validate_absence_of matcher. (<a href="https://github.com/thoughtbot/shoulda-matchers/pull/1464">#1464</a>)</p></li>
</ul>

<h2 id="5-0-0-2021-07-09">5.0.0 - 2021-07-09</h2>

<h3 id="bug-fixes">Bug fixes</h3>

<ul>
<li>Replace <code>in?</code>, method from ActiveSupport, with <code>include?</code> to prevent exception &quot;undefined method <code>in?</code>&quot; on non-Rails app. (<a href="https://github.com/thoughtbot/shoulda-matchers/pull/1405">#1405</a>)</li>
</ul>

<h3 id="features">Features</h3>

<ul>
<li><p>Add support for Rails 6.1. No new Rails 6.1 features are supported, but only
existing features that broke with the upgrade. (<a href="https://github.com/thoughtbot/shoulda-matchers/pull/1418">#1418</a>)</p></li>
<li><p>Add support for RVM (Ruby Version Manager) to setting up local environment. (<a href="https://github.com/thoughtbot/shoulda-matchers/pull/1424">#1424</a>)</p></li>
<li><p>Add support for alias in matcher define_enum. (<a href="https://github.com/thoughtbot/shoulda-matchers/pull/1419">#1419</a>)</p></li>
<li><p>Add support for Ruby 3.0. (<a href="https://github.com/thoughtbot/shoulda-matchers/pull/1406">#1406</a>, <a href="https://github.com/thoughtbot/shoulda-matchers/pull/1427">#1427</a>)</p></li>
</ul>

<h3 id="improvements">Improvements</h3>

<ul>
<li>Remove deprecated warnings emitted on Rails 6.1 in ActiveModel errors. (<a href="https://github.com/thoughtbot/shoulda-matchers/pull/1444">#1444</a>)</li>
</ul>

<h3 id="backward-incompatible-changes">Backward-incompatible changes</h3>

<ul>
<li><p>Drop support for Rails 4.2, 5.0 and 5.1 as well as Ruby 2.4 and 2.5
they&#39;ve been end-of-lifed. The gem now supports Ruby 2.6+ and Rails 5.2+. (<a href="https://github.com/thoughtbot/shoulda-matchers/pull/1412">#1412</a>, <a href="https://github.com/thoughtbot/shoulda-matchers/pull/1415">#1415</a>, <a href="https://github.com/thoughtbot/shoulda-matchers/pull/1422">#1422</a>, <a href="https://github.com/thoughtbot/shoulda-matchers/pull/1428">#1428</a>, <a href="https://github.com/thoughtbot/shoulda-matchers/pull/1429">#1429</a>)</p></li>
<li><p>Remove deprecated matchers:  <code>use_before_filter</code>, <code>use_after_filter</code>, <code>use_around_filter</code> and <code>allow_mass_assignment_of</code>. (<a href="https://github.com/thoughtbot/shoulda-matchers/pull/1430">#1430</a>, <a href="https://github.com/thoughtbot/shoulda-matchers/pull/1431">#1431</a>)</p></li>
</ul>

<h2 id="5-0-0-rc1-2021-06-04">5.0.0.rc1 - 2021-06-04</h2>

<h3 id="bug-fixes">Bug fixes</h3>

<ul>
<li>Replace <code>in?</code>, method from ActiveSupport, with <code>include?</code> to prevent exception &quot;undefined method <code>in?</code>&quot; on non-Rails app. (<a href="https://github.com/thoughtbot/shoulda-matchers/pull/1405">#1405</a>)</li>
</ul>

<h3 id="features">Features</h3>

<ul>
<li><p>Add support for Rails 6.1. No new Rails 6.1 features are supported, but only
existing features that broke with the upgrade. (<a href="https://github.com/thoughtbot/shoulda-matchers/pull/1418">#1418</a>)</p></li>
<li><p>Add support for RVM (Ruby Version Manager) to setting up local environment. (<a href="https://github.com/thoughtbot/shoulda-matchers/pull/1424">#1424</a>)</p></li>
<li><p>Add support for alias in matcher define_enum. (<a href="https://github.com/thoughtbot/shoulda-matchers/pull/1419">#1419</a>)</p></li>
<li><p>Add support for Ruby 3.0. (<a href="https://github.com/thoughtbot/shoulda-matchers/pull/1406">#1406</a>, <a href="https://github.com/thoughtbot/shoulda-matchers/pull/1427">#1427</a>)</p></li>
</ul>

<h3 id="backward-incompatible-changes">Backward-incompatible changes</h3>

<ul>
<li><p>Drop support for Rails 4.2, 5.0 and 5.1 as well as Ruby 2.4 and 2.5
they&#39;ve been end-of-lifed. The gem now supports Ruby 2.6+ and Rails 5.2+. (<a href="https://github.com/thoughtbot/shoulda-matchers/pull/1412">#1412</a>, <a href="https://github.com/thoughtbot/shoulda-matchers/pull/1415">#1415</a>, <a href="https://github.com/thoughtbot/shoulda-matchers/pull/1422">#1422</a>, <a href="https://github.com/thoughtbot/shoulda-matchers/pull/1428">#1428</a>, <a href="https://github.com/thoughtbot/shoulda-matchers/pull/1429">#1429</a>)</p></li>
<li><p>Remove deprecated matchers:  <code>use_before_filter</code>, <code>use_after_filter</code>, <code>use_around_filter</code> and <code>allow_mass_assignment_of</code>. (<a href="https://github.com/thoughtbot/shoulda-matchers/pull/1430">#1430</a>, <a href="https://github.com/thoughtbot/shoulda-matchers/pull/1431">#1431</a>)</p></li>
</ul>

<h2 id="4-5-1-2021-01-15">4.5.1 - 2021-01-15</h2>

<h3 id="bug-fixes">Bug fixes</h3>

<ul>
<li>Update <code>belongs_to</code> to work with composite primary keys. (<a href="https://github.com/thoughtbot/shoulda-matchers/pull/1396">#1396</a>)</li>
</ul>

<h2 id="4-5-0-2020-12-28">4.5.0 - 2020-12-28</h2>

<h3 id="bug-fixes">Bug fixes</h3>

<ul>
<li>Fix <code>bundle exec yard doc</code> replacing pygments.rb with rouge to keep the documentation up to date. (<a href="https://github.com/thoughtbot/shoulda-matchers/pull/1343">#1343</a>)</li>
<li>Fix have_db_column.with_options not raising an error when the user adds an invalid value. (<a href="https://github.com/thoughtbot/shoulda-matchers/pull/1358">#1358</a>)</li>
<li>Fix default value of assossiation_matcher.validate option. It was returning false instead of true. (<a href="https://github.com/thoughtbot/shoulda-matchers/pull/1378">#1378</a>)</li>
<li>Fix validate_absence_of failing for array columns. (<a href="https://github.com/thoughtbot/shoulda-matchers/pull/1383">#1383</a>)</li>
</ul>

<h3 id="features">Features</h3>

<ul>
<li>Add support for has_secure_password custom attributes. (<a href="https://github.com/thoughtbot/shoulda-matchers/pull/1356">#1356</a>)</li>
</ul>

<h3 id="improvements">Improvements</h3>

<ul>
<li>Replace all links with http to https. (<a href="https://github.com/thoughtbot/shoulda-matchers/pull/1340">#1340</a>)</li>
<li>Update the links for have_and_belong_to_many, have_many and have_one in the README to redirect the user to where the matcher description starts. (<a href="https://github.com/thoughtbot/shoulda-matchers/pull/1348">#1348</a>)</li>
<li>Drop <code>git ls-files</code> in gemspec to help downstreams maintenance, because they often need to build packages in an environment that does not have git. (<a href="https://github.com/thoughtbot/shoulda-matchers/pull/1354">#1354</a>)</li>
<li>Add comment about no support of validate_uniqueness_of(:item).scoped_to(array). (<a href="https://github.com/thoughtbot/shoulda-matchers/pull/1355">#1355</a>)</li>
<li>Improve error message for assossiation_matcher.with_foreign_key option. (<a href="https://github.com/thoughtbot/shoulda-matchers/pull/1376">#1376</a>)</li>
</ul>

<h2 id="4-4-1-2020-08-26">4.4.1 - 2020-08-26</h2>

<h3 id="bug-fixes">Bug fixes</h3>

<ul>
<li>Revert reorganization around autoloading introduced in 4.4.0 which prevented
matchers from being loaded. (<a href="https://github.com/thoughtbot/shoulda-matchers/pull/1334">#1334</a>)</li>
</ul>

<h2 id="4-4-0-2020-08-25">4.4.0 - 2020-08-25</h2>

<h3 id="bug-fixes">Bug fixes</h3>

<ul>
<li><p>Fix performance of <code>allow_value</code> so that it doesn&#39;t hang if the given value is
really long. (<a href="https://github.com/thoughtbot/shoulda-matchers/issues/1290">#1290</a>)</p></li>
<li><p>Fix <code>have_many</code> so that it is possible to test an association that has a scope
that takes an argument. (<a href="https://github.com/thoughtbot/shoulda-matchers/issues/952">#952</a>, <a href="https://github.com/thoughtbot/shoulda-matchers/pull/992">#992</a>)</p></li>
<li><p>Update <code>validate_uniqueness_of</code> to use the public <code>validators_on</code> instead of
the private <code>_validators</code> when reading validations off of a model. This
enables shoulda-matchers to be used with the <a href="https://github.com/SchemaPlus/schema_validations">schema_validations</a> gem.
(<a href="https://github.com/thoughtbot/shoulda-matchers/pull/995">#995</a>)</p></li>
<li><p>Update <code>validate_uniqueness_of</code> to work with scopes that are <code>time</code> columns.
(<a href="https://github.com/thoughtbot/shoulda-matchers/pull/1190">#1190</a>)</p></li>
<li><p>Fix <code>have_and_belong_to_many</code> so that when using the <code>join_table</code> qualifier
you can pass a symbol rather than a string. (<a href="https://github.com/thoughtbot/shoulda-matchers/pull/1323">#1323</a>)</p></li>
</ul>

<h3 id="features">Features</h3>

<ul>
<li><p>Add an <code>ignoring_check_for_db_index</code> qualifier to the <code>have_secure_token</code>
matcher, since <code>has_secure_token</code> encourages use of an index but does not
enforce it. (<a href="https://github.com/thoughtbot/shoulda-matchers/pull/1278">#1278</a>)</p></li>
<li><p>Add <code>allow_blank</code> to <code>validate_length_of</code> to match other validation matchers.
(<a href="https://github.com/thoughtbot/shoulda-matchers/pull/725">#725</a>, <a href="https://github.com/thoughtbot/shoulda-matchers/pull/1318">#1318</a>)</p></li>
<li><p>Add new matcher <code>have_implicit_order_column</code> which can be used to test the
<code>implicit_order_column</code> setting for ActiveRecord models under Rails 6+.
(<a href="https://github.com/thoughtbot/shoulda-matchers/pull/1243">#1243</a>)</p></li>
<li><p>Add a new <code>is_other_than</code> qualifier to <code>validate_numericality_of</code> to be able
to test the numericality validation&#39;s <code>:other_than</code> option. (<a href="https://github.com/thoughtbot/shoulda-matchers/pull/1282">#1282</a>)</p></li>
<li><p>Add a new <code>have_one_attached</code> and <code>have_many_attached</code> matchers for testing
the new model-level ActiveStorage macros in Rails 6. (<a href="https://github.com/thoughtbot/shoulda-matchers/pull/1102">#1102</a>)</p></li>
</ul>

<h3 id="improvements">Improvements</h3>

<ul>
<li><p>Update <code>have_many</code> when used against a <code>:through</code> association so that it fails
if the inverse model does not have a <code>belongs_to</code> association. (<a href="https://github.com/thoughtbot/shoulda-matchers/issues/646">#646</a>,
<a href="https://github.com/thoughtbot/shoulda-matchers/pull/723">#723</a>, <a href="https://github.com/thoughtbot/shoulda-matchers/commit/c0a1578435f66d6fbf0db1164205bd8d99f6aa2f">c0a1578</a>)</p></li>
<li><p>Add Ruby 2.7 to test matrix and default development Ruby. (<a href="https://github.com/thoughtbot/shoulda-matchers/pull/1310">#1310</a>)</p></li>
<li><p>Remove warnings emitted on Ruby 2.7 in <code>word_wrap</code>. (<a href="https://github.com/thoughtbot/shoulda-matchers/pull/1314">#1314</a>)</p></li>
<li><p>Remove warnings emitted on Ruby 2.7 in Doublespeak. (<a href="https://github.com/thoughtbot/shoulda-matchers/pull/1328">#1328</a>)</p></li>
<li><p>Clean up requires within the code by converting them to <code>autoload</code>s. (<a href="https://github.com/thoughtbot/shoulda-matchers/pull/1320">#1320</a>)</p></li>
</ul>

<h2 id="4-3-0-2020-02-18">4.3.0 - 2020-02-18</h2>

<h3 id="bug-fixes">Bug fixes</h3>

<ul>
<li>Fix <code>missing attribute:: scope 1</code> intermittent test. (<a href="https://github.com/thoughtbot/shoulda-matchers/pull/1274">#1274</a>)</li>
</ul>

<h3 id="features">Features</h3>

<ul>
<li>Add <code>have_rich_text</code> matcher for <code>ActionText</code>. (<a href="https://github.com/thoughtbot/shoulda-matchers/pull/1263">#1263</a>)</li>
</ul>

<h3 id="improvements">Improvements</h3>

<ul>
<li>Use range on <code>validate_exclusion_of#in_range</code> documentation. (<a href="https://github.com/thoughtbot/shoulda-matchers/pull/1273">#1273</a>)</li>
</ul>

<h2 id="4-2-0-2020-01-29">4.2.0 - 2020-01-29</h2>

<h3 id="bug-fixes">Bug fixes</h3>

<ul>
<li><p>Fix typos in documentation of <code>allow_values</code>. (<a href="https://github.com/thoughtbot/shoulda-matchers/pull/1241">#1241</a>)</p></li>
<li><p>Fix appraisal command in CONTRIBUTING.md file. (<a href="https://github.com/thoughtbot/shoulda-matchers/pull/1253">#1253</a>)</p></li>
</ul>

<h3 id="features">Features</h3>

<ul>
<li><p>Add support for <code>optional: false</code> in <code>belongs_to</code> associations.
(<a href="https://github.com/thoughtbot/shoulda-matchers/pull/1237">#1237</a>)</p></li>
<li><p>Add support for associations with <code>inverse_of: false</code> and non-standard foreign
key (<a href="https://github.com/thoughtbot/shoulda-matchers/pull/1106">#1106</a>)</p></li>
</ul>

<h3 id="improvements">Improvements</h3>

<ul>
<li><p>Remove <code>minitest-reporters</code> dependency. ([#1251])</p></li>
<li><p>Development dependency updates.</p></li>
</ul>

<h2 id="4-1-2-2019-08-01">4.1.2 - 2019-08-01</h2>

<h3 id="bug-fixes">Bug fixes</h3>

<ul>
<li>Fix another regression with <code>validate_presence_of</code> so that it works against an
attribute that has been decorated with <code>serialize</code> using a custom serializer
class. (<a href="https://github.com/thoughtbot/shoulda-matchers/pull/1236">#1236</a>)</li>
</ul>

<h2 id="4-1-1-2019-07-16">4.1.1 - 2019-07-16</h2>

<h3 id="bug-fixes">Bug fixes</h3>

<ul>
<li>Patch some backward-incompatible changes to <code>validate_presence_of</code> that were
made in the last version. As of 4.1.0 the presence matcher now checks to
ensure that empty string will cause the record to be invalid (in addition to
nil, which it was already checking against). However, this check was being
performed even if the attribute or column the presence matcher is being run
against didn&#39;t support being set to an empty string. This releases fixes this.
(<a href="https://github.com/thoughtbot/shoulda-matchers/pull/1222">#1222</a>, <a href="https://github.com/thoughtbot/shoulda-matchers/pull/1224">#1224</a>, <a href="https://github.com/thoughtbot/shoulda-matchers/pull/1231">#1231</a>)</li>
</ul>

<h2 id="4-1-0-2019-06-09">4.1.0 - 2019-06-09</h2>

<h3 id="bug-fixes">Bug fixes</h3>

<ul>
<li><p>Fix <code>validate_uniqueness_of</code> so that it works when a scope is defined as a
string instead of a symbol on the model. (<a href="https://github.com/thoughtbot/shoulda-matchers/pull/1176">#1176</a>)</p></li>
<li><p>Fix <code>have_db_index</code> so that it can be used against multiple models that are
connected to different databases. (<a href="https://github.com/thoughtbot/shoulda-matchers/pull/1200">#1200</a>)</p></li>
</ul>

<h3 id="features">Features</h3>

<ul>
<li><p>Add support for Rails 6. No new Rails 6 features are supported, but only
existing features that broke with the upgrade. (<a href="https://github.com/thoughtbot/shoulda-matchers/pull/1193">#1193</a>)</p></li>
<li><p>Add support for expression indexes (Rails 5, Postgres only) to
<code>have_db_index</code>. (<a href="https://github.com/thoughtbot/shoulda-matchers/pull/1211">#1211</a>)</p></li>
<li><p>Add <code>allow_nil</code> to the <code>validate_presence_of</code> matcher. (<a href="https://github.com/thoughtbot/shoulda-matchers/commit/834d8d0356573b9f47e63a1b910cfa8f3d815e51">834d8d0</a>, <a href="https://github.com/thoughtbot/shoulda-matchers/pull/1100">#1100</a>)</p></li>
</ul>

<h3 id="improvements">Improvements</h3>

<ul>
<li><p>Update <code>validate_presence_of</code> so that if it is being used against an
association which is <code>required: true</code> or <code>optional: false</code>, or it is not
configured as such but ActiveRecord defaults <code>belong_to</code> associations to
<code>optional: false</code>, and the matcher fails, the developer is reminded in the
failure message that the <code>belong_to</code> matcher can be used instead. (<a href="https://github.com/thoughtbot/shoulda-matchers/pull/1214">#1214</a>,
<a href="https://github.com/thoughtbot/shoulda-matchers/commit/8697b015ed88fdbbbcf5d31bf98670f17c3df9e1">8697b01</a>)</p></li>
<li><p>Update <code>define_enum_for</code> so that it produces a more helpful message on
failure. (<a href="https://github.com/thoughtbot/shoulda-matchers/pull/1216">#1216</a>)</p></li>
</ul>

<h2 id="4-0-1-2019-02-26">4.0.1 - 2019-02-26</h2>

<h3 id="bug-fixes">Bug fixes</h3>

<ul>
<li>Fix gemspec so that <code>setup</code> script isn&#39;t installed globally when gem is
installed. (<a href="https://github.com/thoughtbot/shoulda-matchers/pull/1180">#1180</a>)</li>
</ul>

<h2 id="4-0-0-2019-02-26-yanked">4.0.0 - 2019-02-26 [YANKED]</h2>

<p>This release mainly brings the gem up to date with modern versions of Ruby and
Rails and drops support for older, unsupported versions. The compatibility list
is now:</p>

<ul>
<li><strong>Ruby:</strong> 2.6.0, 2.5.1, 2.4.4, 2.3.7</li>
<li><strong>Rails:</strong> 5.2.2, 5.1.6.1, 5.0.7, 4.2.10</li>
</ul>

<h3 id="backward-incompatible-changes">Backward-incompatible changes</h3>

<ul>
<li><p>Drop support for Rails 4.0 and 4.1 as well as Ruby 2.0, 2.1, and 2.2, since
they&#39;ve been end-of-lifed. The gem now supports Ruby 2.3+ and Rails 4.2+.</p></li>
<li><p><code>use_before_filter</code>, <code>use_after_filter</code>, and <code>use_around_filter</code> are no longer
usable when using shoulda-matchers under Rails 5.x, as the corresponding
controller callbacks don&#39;t exist there. (<a href="https://github.com/thoughtbot/shoulda-matchers/pull/1054">#1054</a>)</p></li>
</ul>

<h3 id="deprecations">Deprecations</h3>

<ul>
<li><code>define_enum_for</code>: <code>with</code> is deprecated in favor of <code>with_values</code>. This is to
prevent confusion with <code>with_prefix</code> and <code>with_suffix</code>, which are new.
(<a href="https://github.com/thoughtbot/shoulda-matchers/pull/1077">#1077</a>)</li>
</ul>

<h3 id="bug-fixes">Bug fixes</h3>

<ul>
<li><p>Fix association matchers when used under Rails 5.x so that they make use of
<code>ActiveRecord::Base.connection.data_sources</code> instead of
<code>ActiveRecord::Base.connection.tables</code>, which was deprecated. (<a href="https://github.com/thoughtbot/shoulda-matchers/issues/933">#933</a>, <a href="https://github.com/thoughtbot/shoulda-matchers/pull/943">#943</a>,
<a href="https://github.com/thoughtbot/shoulda-matchers/commit/61c365416a09c5cffd7fcb774a07de4abf8e9afd">61c3654</a>)</p></li>
<li><p>Fix the <code>serialize</code> matcher so that it works with Rails 5.x. (<a href="https://github.com/thoughtbot/shoulda-matchers/issues/913">#913</a>, <a href="https://github.com/thoughtbot/shoulda-matchers/pull/965">#965</a>,
<a href="https://github.com/thoughtbot/shoulda-matchers/commit/df04f8704abc3754c63c488433dac8c30573da6b">df04f87</a>)</p></li>
<li><p>Fix our custom mocking library Doublespeak, which is used by
<code>delegate_method</code>, so that it does not produce a warning under Ruby 2.4.
(<a href="httpce9624b3c5a08b9134150e228440c771d95782b7s://github.com/thoughtbot/shoulda-matchers/issues/1006">#1006</a>, <a href="https://github.com/thoughtbot/shoulda-matchers/pull/1038">#1038</a>, <a href="https://github.com/thoughtbot/shoulda-matchers/commit/8d7dcb88c3bae8315e4107a39ae17fe19a4b6786">8d7dcb8</a>)</p></li>
<li><p>Fix the <code>permit</code> matcher so that it uses the correct method signature to call
the controller action with params in order to prevent a warning under Rails
5.x. (<a href="https://github.com/thoughtbot/shoulda-matchers/issues/867">#867</a>, <a href="https://github.com/thoughtbot/shoulda-matchers/pull/917">#917</a>, <a href="https://github.com/thoughtbot/shoulda-matchers/pull/964">#964</a>, <a href="https://github.com/thoughtbot/shoulda-matchers/pull/989">#989</a>, <a href="https://github.com/thoughtbot/shoulda-matchers/commit/ce9624b3c5a08b9134150e228440c771d95782b7">ce9624b</a>)</p></li>
<li><p>Fix the <code>define_enum_for</code> matcher so that it once more allows string columns
to be used as enum attributes. (<a href="https://github.com/thoughtbot/shoulda-matchers/issues/912">#912</a>, <a href="https://github.com/thoughtbot/shoulda-matchers/pull/1063">#1063</a>, <a href="https://github.com/thoughtbot/shoulda-matchers/commit/5650aae35de85aeabd75bc544324fda33ce1a092">5650aae</a>)</p></li>
<li><p>Fix <code>validate_uniqueness_of</code> when used under Rails 4.2 so that when the
attribute you&#39;re testing is a boolean column, it will no longer emit a
warning. (<a href="https://github.com/thoughtbot/shoulda-matchers/issues/949">#949</a>, <a href="https://github.com/thoughtbot/shoulda-matchers/pull/1073">#1073</a>)</p></li>
<li><p>Fix <code>validate_inclusion_of</code> so that if it fails, it will no longer blow up
with the error &quot;undefined method `attribute_setter&#39; for nil:NilClass&quot;.
(<a href="https://github.com/thoughtbot/shoulda-matchers/issues/904">#904</a>)</p></li>
<li><p>Add negative versions of all validation matchers (i.e. implement
<code>does_not_match?</code> for them) to prevent them from blowing up with
&quot;undefined method `attribute_setter&#39; for nil:NilClass&quot;. (<a href="https://github.com/thoughtbot/shoulda-matchers/issues/904">#904</a>)</p></li>
</ul>

<h3 id="features">Features</h3>

<ul>
<li><p>Add <code>required</code> and <code>optional</code> qualifiers to <code>belong_to</code> and <code>have_one</code>
matchers. (When using the <code>belong_to</code> matcher under Rails 5+, <code>required</code> is
assumed unless overridden.) (<a href="https://github.com/thoughtbot/shoulda-matchers/issues/861">#861</a>, <a href="https://github.com/thoughtbot/shoulda-matchers/issues/870">#870</a>, <a href="https://github.com/thoughtbot/shoulda-matchers/pull/956">#956</a>, <a href="https://github.com/thoughtbot/shoulda-matchers/commit/3af3d9f7abb768c063759941724ccae48c7b76d6">3af3d9f</a>)</p></li>
<li><p>Add <code>without_validating_presence</code> qualifier to <code>belong_to</code> to get around the
fact that <code>required</code> is assumed, above. (<a href="https://github.com/thoughtbot/shoulda-matchers/issues/1153">#1153</a>, <a href="https://github.com/thoughtbot/shoulda-matchers/issues/1154">#1154</a>)</p></li>
<li><p>Add <code>allow_nil</code> qualifier to <code>delegate_method</code>. (<a href="https://github.com/thoughtbot/shoulda-matchers/pull/798">#798</a>, <a href="https://github.com/thoughtbot/shoulda-matchers/commit/d49cfcae1b294e12a05e06a5612cb8ebb22a7df1">d49cfca</a>)</p></li>
<li><p>Add <code>allow_nil</code> qualifier to <code>validate_length_of</code>. (<a href="https://github.com/thoughtbot/shoulda-matchers/issues/724">#724</a>)</p></li>
<li><p>Add a <code>port</code> option to the <code>route</code> matcher to allow testing a route that has
a constraint on it such that only a specific port may be used to access that
route. (<a href="https://github.com/thoughtbot/shoulda-matchers/issues/954">#954</a>, <a href="https://github.com/thoughtbot/shoulda-matchers/pull/1074">#1074</a>, <a href="https://github.com/thoughtbot/shoulda-matchers/pull/1075">#1075</a>)</p></li>
<li><p>Add <code>with_prefix</code> and <code>with_suffix</code> to <code>define_enum_for</code> to allow testing
the <code>enum</code> macro with corresponding <code>prefix</code> and <code>suffix</code> options (Rails 5
only). (<a href="https://github.com/thoughtbot/shoulda-matchers/issues/961">#961</a>, <a href="https://github.com/thoughtbot/shoulda-matchers/pull/1077">#1077</a>)</p></li>
<li><p>Add <code>index_errors</code> option to <code>has_many</code> (Rails 5 only). (<a href="https://github.com/thoughtbot/shoulda-matchers/pull/1089">#1089</a>, <a href="https://github.com/thoughtbot/shoulda-matchers/commit/795ca688bff08590dbd2ab6f2b51ea415e0c7473">795ca68</a>)</p></li>
</ul>

<h3 id="improvements">Improvements</h3>

<ul>
<li>Replace usage of Fixnum with Integer to prevent Ruby 2.4 from emitting
deprecation warnings. (<a href="https://github.com/thoughtbot/shoulda-matchers/issues/1001">#1001</a>, <a href="https://github.com/thoughtbot/shoulda-matchers/pull/1009">#1009</a>, <a href="https://github.com/thoughtbot/shoulda-matchers/pull/1031">#1031</a>, <a href="https://github.com/thoughtbot/shoulda-matchers/pull/1040">#1040</a>, <a href="https://github.com/thoughtbot/shoulda-matchers/commit/61c365416a09c5cffd7fcb774a07de4abf8e9afd">61c3654</a>,
<a href="https://github.com/thoughtbot/shoulda-matchers/commit/03a1d213805a44a0aec99857e01cab8524aa0c05">03a1d21</a>)</li>
</ul>

<h2 id="3-1-3-2019-01-29">3.1.3 - 2019-01-29</h2>

<h3 id="improvements">Improvements</h3>

<ul>
<li>Update <code>BigDecimal.new()</code> to use <code>BigDecimal()</code> and avoid deprecation warnings
in Ruby 2.6.</li>
</ul>

<h2 id="3-1-2-2017-07-12">3.1.2 - 2017-07-12</h2>

<h3 id="deprecations">Deprecations</h3>

<ul>
<li>This is the <strong>last version</strong> that supports Rails 4.0 and 4.1 and Ruby 2.0 and
2.1.</li>
</ul>

<h3 id="bug-fixes">Bug fixes</h3>

<ul>
<li>When the <code>permit</code> matcher was used without <code>#on</code>, the controller did not use
<code>params#require</code>, the params object was duplicated, and the matcher did not
recognize the <code>#permit</code> call inside the controller. This behavior happened
because the matcher overwrote double registries with the same parameter hash
whenever ActionController::Parameters was instantiated. (<a href="https://github.com/thoughtbot/shoulda-matchers/issues/899">#899</a>, <a href="https://github.com/thoughtbot/shoulda-matchers/pull/902">#902</a>,
<a href="https://github.com/thoughtbot/shoulda-matchers/commit/44c0198830921650af3b4a56f5d72aaae2168480">44c019</a>)</li>
</ul>

<h2 id="3-1-1-2016-01-28">3.1.1 - 2016-01-28</h2>

<h3 id="bug-fixes">Bug fixes</h3>

<ul>
<li><p>Some matchers make use of ActiveSupport&#39;s <code>in?</code> method, but do not include the
file where this is defined in ActiveSupport. This causes problems with
projects using shoulda-matchers that do not include all of ActiveSupport by
default. To fix this, replace <code>in?</code> with Ruby&#39;s builtin <code>include?</code>. (<a href="https://github.com/thoughtbot/shoulda-matchers/issues/879">#879</a>)</p></li>
<li><p><code>validate_uniqueness_of</code> works by creating a record if it doesn&#39;t exist, and
then testing against a new record with various attributes set that are equal
to (or different than) corresponding attributes in the existing record. In
3.1.0 a change was made whereby when the uniqueness matcher is given a new
record and creates an existing record out of it, it ensures that the record is
valid before continuing on. This created a problem because if the subject,
before it was saved, was empty and therefore in an invalid state, it could not
effectively be saved. While ideally this should be enforced, doing so would be
a backward-incompatible change, so this behavior has been rolled back.
(<a href="https://github.com/thoughtbot/shoulda-matchers/issues/880">#880</a>, <a href="https://github.com/thoughtbot/shoulda-matchers/issues/884">#884</a>, <a href="https://github.com/thoughtbot/shoulda-matchers/issues/885">#885</a>, <a href="https://github.com/thoughtbot/shoulda-matchers/commit/45de8698487d57f559c5bf35818d1c1ee82b0e77">45de869</a>)</p></li>
<li><p>Fix an issue with <code>validate_uniqueness_of</code> + <code>scoped_to</code> when used against a
model where the attribute has multiple uniqueness validations and each
validation has a different set of scopes. In this case, a test written for the
first validation (and its scopes) would pass, but tests for the other
validations (and their scopes) would not, as the matcher only considered the
first set of scopes as the <em>actual</em> set of scopes. (<a href="https://github.com/thoughtbot/shoulda-matchers/issues/830">#830</a>, <a href="https://github.com/thoughtbot/shoulda-matchers/commit/28bd9a10c71af4d541b692d6204163c394ebd33c">28bd9a1</a>)</p></li>
</ul>

<h3 id="improvements">Improvements</h3>

<ul>
<li>Update <code>validate_uniqueness_of</code> so that if an existing record fails to be
created because a column is non-nullable and was not filled in, raise an
ExistingRecordInvalid exception with details on how to fix the test.
(<a href="https://github.com/thoughtbot/shoulda-matchers/commit/78ccfc50b52fa686c109d614df66744b0da65380">78ccfc5</a>)</li>
</ul>

<h2 id="3-1-0-2016-01-11">3.1.0 - 2016-01-11</h2>

<h3 id="bug-fixes">Bug fixes</h3>

<ul>
<li><p>Update <code>validate_numericality_of</code> so that submatchers are applied lazily
instead of immediately. Previously, qualifiers were order-dependent, meaning
that if you used <code>strict</code> before you used, say, <code>odd</code>, then <code>strict</code> wouldn&#39;t
actually apply to <code>odd</code>. Now the order that you specify qualifiers doesn&#39;t
matter. (<a href="https://github.com/thoughtbot/shoulda-matchers/commit/6c67a5eb0df265d3a565aa7d1a7e2b645051eb5a">6c67a5e</a>)</p></li>
<li><p>Fix <code>allow_value</code> so that it does not raise an AttributeChangedValueError
(formerly CouldNotSetAttributeError) when used against an attribute that is an
enum in an ActiveRecord model. (<a href="https://github.com/thoughtbot/shoulda-matchers/commit/9e8603eb745bfa2a5aea6dfef85adf680d447151">9e8603e</a>)</p></li>
<li><p>Add a <code>ignoring_interference_by_writer</code> qualifier to all matchers, not just
<code>allow_value</code>. <em>This is enabled by default, which means that you should never
get a CouldNotSetAttributeError again.</em> (You may get some more information if
a test fails, however.) (<a href="https://github.com/thoughtbot/shoulda-matchers/issues/786">#786</a>, <a href="https://github.com/thoughtbot/shoulda-matchers/issues/799">#799</a>, <a href="https://github.com/thoughtbot/shoulda-matchers/issues/801">#801</a>, <a href="https://github.com/thoughtbot/shoulda-matchers/issues/804">#804</a>, <a href="https://github.com/thoughtbot/shoulda-matchers/issues/817">#817</a>, <a href="https://github.com/thoughtbot/shoulda-matchers/issues/841">#841</a>,
<a href="https://github.com/thoughtbot/shoulda-matchers/issues/849">#849</a>, <a href="https://github.com/thoughtbot/shoulda-matchers/issues/872">#872</a>, <a href="https://github.com/thoughtbot/shoulda-matchers/issues/873">#873</a>, <a href="https://github.com/thoughtbot/shoulda-matchers/issues/874">#874</a>, <a href="https://github.com/thoughtbot/shoulda-matchers/commit/118993480604d39c73687d069f7af3726f3e3f3e">1189934</a>, <a href="https://github.com/thoughtbot/shoulda-matchers/commit/5532f4359aa332b10de7d46f876eaffd4a95b5b6">5532f43</a>)</p></li>
<li><p>Fix <code>validate_numericality_of</code> so that it does not blow up when used against
a virtual attribute defined in an ActiveRecord model (that is, an attribute
that is not present in the database but is defined using <code>attr_accessor</code>).
(<a href="https://github.com/thoughtbot/shoulda-matchers/pull/822">#822</a>)</p></li>
<li><p>Update <code>validate_numericality_of</code> so that it no longer raises an
IneffectiveTestError if used against a numeric column. (<a href="https://github.com/thoughtbot/shoulda-matchers/issues/832">#832</a>, <a href="https://github.com/thoughtbot/shoulda-matchers/commit/5ed03624197314865ff5463e473e5e84bb91d9ea">5ed0362</a>)</p></li>
</ul>

<h3 id="features">Features</h3>

<ul>
<li>Add a new qualifier, <code>ignoring_case_sensitivity</code>, to <code>validate_uniqueness_of</code>.
This provides a way to test uniqueness of an attribute whose case is
normalized, either in a custom writer method for that attribute, or in a
custom <code>before_validation</code> callback. (<a href="https://github.com/thoughtbot/shoulda-matchers/issues/836">#836</a>, <a href="https://github.com/thoughtbot/shoulda-matchers/pull/840">#840</a>)</li>
</ul>

<h3 id="improvements">Improvements</h3>

<ul>
<li><p>Improve failure messages and descriptions of all matchers across the board so
that it is easier to understand what the matcher was doing when it failed.
(You&#39;ll see a huge difference in the output of the numericality and uniqueness
matchers in particular.)</p></li>
<li><p>Matchers now raise an error if any attributes that the matcher is attempting
to set do not exist on the model. (<a href="https://github.com/thoughtbot/shoulda-matchers/commit/296211211497e624dde87adae68b385ad4cdae3a">2962112</a>)</p></li>
<li><p>Update <code>validate_numericality_of</code> so that it doesn&#39;t always run all of the
submatchers, but stops on the first one that fails. Since failure messages
now contain information as to what value the matcher set on the attribute when
it failed, this change guarantees that the correct value will be shown.
(<a href="https://github.com/thoughtbot/shoulda-matchers/commit/8e24a6e9b2b147f2c51fb03aa02543f213acab34">8e24a6e</a>)</p></li>
<li><p>Continue to detect if attributes change incoming values, but now instead of
immediately seeing a CouldNotSetAttributeError, you will only be informed
about it if the test you&#39;ve written fails. (<a href="https://github.com/thoughtbot/shoulda-matchers/commit/118993480604d39c73687d069f7af3726f3e3f3e">1189934</a>)</p></li>
<li><p>Add an additional check to <code>define_enum_for</code> to ensure that the column that
underlies the enum attribute you&#39;re testing is an integer column. (<a href="https://github.com/thoughtbot/shoulda-matchers/commit/68dd70a23d8997a490683adcd2108a4a5cadf8ba">68dd70a</a>)</p></li>
<li><p>Add a test for <code>validate_numericality_of</code> so that it officially supports money
columns. (<a href="https://github.com/thoughtbot/shoulda-matchers/issues/841">#841</a>, <a href="https://github.com/thoughtbot/shoulda-matchers/commit/a559713f96303414551c0bc1767fb11eb19bcc5d">a559713</a>)</p></li>
</ul>

<h2 id="3-0-1-2015-10-23">3.0.1 - 2015-10-23</h2>

<h3 id="bug-fixes">Bug fixes</h3>

<ul>
<li><p>Fix <code>validate_inclusion_of</code> + <code>in_array</code> when used against a date or datetime
column/attribute so that it does not raise a CouldNotSetAttributeError.
(<a href="https://github.com/thoughtbot/shoulda-matchers/pull/783">#783</a>, <a href="https://github.com/thoughtbot/shoulda-matchers/commit/8fa97b4ff33b57ce16dfb96be1ec892502f2aa9e">8fa97b4</a>)</p></li>
<li><p>Fix <code>validate_numericality_of</code> when used against a numeric column so that it
no longer raises a CouldNotSetAttributeError if the matcher has been qualified
in any way (<code>only_integer</code>, <code>greater_than</code>, <code>odd</code>, etc.). (<a href="https://github.com/thoughtbot/shoulda-matchers/pull/784">#784</a>, <a href="https://github.com/thoughtbot/shoulda-matchers/pull/812">#812</a>)</p></li>
</ul>

<h3 id="improvements">Improvements</h3>

<ul>
<li><code>validate_uniqueness_of</code> now raises a NonCaseSwappableValueError if the value
the matcher is using to test uniqueness cannot be case-swapped -- in other
words, if it doesn&#39;t contain any alpha characters. When this is the case, the
matcher cannot work effectively. (<a href="https://github.com/thoughtbot/shoulda-matchers/pull/789">#789</a>, <a href="https://github.com/thoughtbot/shoulda-matchers/commit/ada9bd3a1b9f2bb9fa74d0dfe1f8f7080314298c">ada9bd3</a>)</li>
</ul>

<h2 id="3-0-0-2015-10-01">3.0.0 - 2015-10-01</h2>

<h3 id="backward-incompatible-changes">Backward-incompatible changes</h3>

<ul>
<li><p>We&#39;ve dropped support for Rails 3.x, Ruby 1.9.2, and Ruby 1.9.3, and RSpec 2.
All of these have been end-of-lifed. (<a href="https://github.com/thoughtbot/shoulda-matchers/commit/a4045a1f9bc454e618a7c55960942eb030f02fdd">a4045a1</a>, <a href="https://github.com/thoughtbot/shoulda-matchers/commit/b7fe87ae915f6b1f99d64e847fea536ad0f78024">b7fe87a</a>, <a href="https://github.com/thoughtbot/shoulda-matchers/commit/32c0e62596b87e37a301f87bbe21cfcc77750552">32c0e62</a>)</p></li>
<li><p>The gem no longer detects the test framework you&#39;re using or mixes itself into
that framework automatically. <a href="https://github.com/freerange/mocha/commit/049080c673ee3f76e76adc1e1a6122c7869f1648">History</a> has
<a href="https://github.com/rr/rr/issues/29">shown</a> that performing any kind of detection is prone
to bugs and more complicated than it should be.</p></li>
</ul>

<p>Here are the updated instructions:</p>

<ul>
<li>You no longer need to say <code>require: false</code> in your Gemfile; you can
include the gem as normal.</li>
<li><p>You&#39;ll need to add the following somewhere in your <code>rails_helper</code> (for
RSpec) or <code>test_helper</code> (for Minitest / Test::Unit):</p>

<pre class="code ruby"><code class="ruby"><span class="no">Shoulda</span><span class="o">::</span><span class="no">Matchers</span><span class="p">.</span><span class="nf">configure</span> <span class="k">do</span> <span class="o">|</span><span class="n">config</span><span class="o">|</span>
  <span class="n">config</span><span class="p">.</span><span class="nf">integrate</span> <span class="k">do</span> <span class="o">|</span><span class="n">with</span><span class="o">|</span>
    <span class="c1"># Choose a test framework:</span>
    <span class="n">with</span><span class="p">.</span><span class="nf">test_framework</span> <span class="ss">:rspec</span>
    <span class="n">with</span><span class="p">.</span><span class="nf">test_framework</span> <span class="ss">:minitest</span>
    <span class="n">with</span><span class="p">.</span><span class="nf">test_framework</span> <span class="ss">:minitest_4</span>
    <span class="n">with</span><span class="p">.</span><span class="nf">test_framework</span> <span class="ss">:test_unit</span>

    <span class="c1"># Choose one or more libraries:</span>
    <span class="n">with</span><span class="p">.</span><span class="nf">library</span> <span class="ss">:active_record</span>
    <span class="n">with</span><span class="p">.</span><span class="nf">library</span> <span class="ss">:active_model</span>
    <span class="n">with</span><span class="p">.</span><span class="nf">library</span> <span class="ss">:action_controller</span>
    <span class="c1"># Or, choose the following (which implies all of the above):</span>
    <span class="n">with</span><span class="p">.</span><span class="nf">library</span> <span class="ss">:rails</span>
  <span class="k">end</span>
<span class="k">end</span>
</code></pre></li>
</ul>

<p>(<a href="https://github.com/thoughtbot/shoulda-matchers/commit/190007155e0676aae84d08d8ed8eed3beebc3a06">1900071</a>)</p>

<ul>
<li><p>Previously, under RSpec, all of the matchers were mixed into all of the
example groups. This created a problem because some gems, such as
<a href="https://github.com/adambarber/active_model_serializers-matchers">active_model_serializers-matchers</a>, provide matchers that share the same
name as some of our own matchers. Now, matchers are only mixed into whichever
example group they belong to:</p>

<ul>
<li>ActiveModel and ActiveRecord matchers are available only in model example
groups.</li>
<li>ActionController matchers are available only in controller example groups.</li>
<li>The <code>route</code> matcher is available only in routing example groups.</li>
</ul></li>
</ul>

<p>(<a href="https://github.com/thoughtbot/shoulda-matchers/commit/af98a23091551fb40aded5a8d4f9e5be926f53a9">af98a23</a>, <a href="https://github.com/thoughtbot/shoulda-matchers/commit/8cf449b4ca37d0d7446d2cabbfa5a1582358256d">8cf449b</a>)</p>

<ul>
<li><p>There are two changes to <code>allow_value</code>:</p>

<ul>
<li>The negative form of <code>allow_value</code> has been changed so that instead of
asserting that any of the given values is an invalid value (allowing good
values to pass through), assert that <em>all</em> values are invalid values
(allowing good values not to pass through). This means that this test which
formerly passed will now fail:</li>
</ul>

<pre class="code ruby"><code class="ruby"><span class="n">expect</span><span class="p">(</span><span class="n">record</span><span class="p">).</span><span class="nf">not_to</span> <span class="n">allow_value</span><span class="p">(</span><span class="s1">'good value'</span><span class="p">,</span> <span class="o">*</span><span class="n">bad_values</span><span class="p">)</span>
</code></pre>

<p>(<a href="https://github.com/thoughtbot/shoulda-matchers/commit/19c38a642a2ae1316ef12540a0185cd026901e74">19ce8a6</a>)</p>

<ul>
<li><code>allow_value</code> now raises a CouldNotSetAttributeError if in setting the
attribute, the value of the attribute from reading the attribute back is
different from the one used to set it.</li>
</ul>

<p>This would happen if the writer method for that attribute has custom logic
to ignore certain incoming values or change them in any way. Here are three
examples we&#39;ve seen:</p>

<ul>
<li>You&#39;re attempting to assert that an attribute should not allow nil, yet
the attribute&#39;s writer method contains a conditional to do nothing if
the attribute is set to nil:</li>
</ul>

<pre class="code ruby"><code class="ruby">  <span class="k">class</span> <span class="nc">Foo</span>
    <span class="kp">include</span> <span class="no">ActiveModel</span><span class="o">::</span><span class="no">Model</span>

    <span class="nb">attr_reader</span> <span class="ss">:bar</span>

    <span class="k">def</span> <span class="nf">bar</span><span class="o">=</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
      <span class="k">return</span> <span class="k">if</span> <span class="n">value</span><span class="p">.</span><span class="nf">nil?</span>
      <span class="vi">@bar</span> <span class="o">=</span> <span class="n">value</span>
    <span class="k">end</span>
  <span class="k">end</span>

  <span class="n">describe</span> <span class="no">Foo</span> <span class="k">do</span>
    <span class="n">it</span> <span class="k">do</span>
      <span class="n">foo</span> <span class="o">=</span> <span class="no">Foo</span><span class="p">.</span><span class="nf">new</span>
      <span class="n">foo</span><span class="p">.</span><span class="nf">bar</span> <span class="o">=</span> <span class="s2">"baz"</span>
      <span class="c1"># This will raise a CouldNotSetAttributeError since `foo.bar` is now "123"</span>
      <span class="n">expect</span><span class="p">(</span><span class="n">foo</span><span class="p">).</span><span class="nf">not_to</span> <span class="n">allow_value</span><span class="p">(</span><span class="kp">nil</span><span class="p">).</span><span class="nf">for</span><span class="p">(</span><span class="ss">:bar</span><span class="p">)</span>
    <span class="k">end</span>
  <span class="k">end</span>
</code></pre>

<ul>
<li>You&#39;re attempting to assert that an numeric attribute should not allow a
string that contains non-numeric characters, yet the writer method for
that attribute strips out non-numeric characters:</li>
</ul>

<pre class="code ruby"><code class="ruby">  <span class="k">class</span> <span class="nc">Foo</span>
    <span class="kp">include</span> <span class="no">ActiveModel</span><span class="o">::</span><span class="no">Model</span>

    <span class="nb">attr_reader</span> <span class="ss">:bar</span>

    <span class="k">def</span> <span class="nf">bar</span><span class="o">=</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
      <span class="vi">@bar</span> <span class="o">=</span> <span class="n">value</span><span class="p">.</span><span class="nf">gsub</span><span class="p">(</span><span class="sr">/\D+/</span><span class="p">,</span> <span class="s1">''</span><span class="p">)</span>
    <span class="k">end</span>
  <span class="k">end</span>

  <span class="n">describe</span> <span class="no">Foo</span> <span class="k">do</span>
    <span class="n">it</span> <span class="k">do</span>
      <span class="n">foo</span> <span class="o">=</span> <span class="no">Foo</span><span class="p">.</span><span class="nf">new</span>
      <span class="c1"># This will raise a CouldNotSetAttributeError since `foo.bar` is now "123"</span>
      <span class="n">expect</span><span class="p">(</span><span class="n">foo</span><span class="p">).</span><span class="nf">not_to</span> <span class="n">allow_value</span><span class="p">(</span><span class="s2">"abc123"</span><span class="p">).</span><span class="nf">for</span><span class="p">(</span><span class="ss">:bar</span><span class="p">)</span>
    <span class="k">end</span>
  <span class="k">end</span>
</code></pre>

<ul>
<li>You&#39;re passing a value to <code>allow_value</code> that the model typecasts into
another value:</li>
</ul>

<pre class="code ruby"><code class="ruby">  <span class="n">describe</span> <span class="no">Foo</span> <span class="k">do</span>
    <span class="c1"># Assume that `attr` is a string</span>
    <span class="c1"># This will raise a CouldNotSetAttributeError since `attr` typecasts `[]` to `"[]"`</span>
    <span class="n">it</span> <span class="p">{</span> <span class="n">should_not</span> <span class="n">allow_value</span><span class="p">([]).</span><span class="nf">for</span><span class="p">(</span><span class="ss">:attr</span><span class="p">)</span> <span class="p">}</span>
  <span class="k">end</span>
</code></pre>

<p>With all of these failing examples, why are we making this change? We want
to guard you (as the developer) from writing a test that you think acts one
way but actually acts a different way, as this could lead to a confusing
false positive or negative.</p>

<p>If you understand the problem and wish to override this behavior so that
you do not get a CouldNotSetAttributeError, you can add the
<code>ignoring_interference_by_writer</code> qualifier like so. Note that this will not
always cause the test to pass.</p>

<pre class="code ruby"><code class="ruby"><span class="n">it</span> <span class="p">{</span> <span class="n">should_not</span> <span class="n">allow_value</span><span class="p">([]).</span><span class="nf">for</span><span class="p">(</span><span class="ss">:attr</span><span class="p">).</span><span class="nf">ignoring_interference_by_writer</span> <span class="p">}</span>
</code></pre>

<p>(<a href="https://github.com/thoughtbot/shoulda-matchers/commit/9d9dc4e6b9cf2c19df66a1b4ba432ad8d3e5dded">9d9dc4e</a>)</p></li>
<li><p><code>validate_uniqueness_of</code> is now properly case-sensitive by default, to match
the default behavior of the validation itself. This is a backward-incompatible
change because this test which incorrectly passed before will now fail:</p>

<pre class="code ruby"><code class="ruby"><span class="k">class</span> <span class="nc">Product</span> <span class="o">&lt;</span> <span class="no">ActiveRecord</span><span class="o">::</span><span class="no">Base</span>
  <span class="n">validates_uniqueness_of</span> <span class="ss">:name</span><span class="p">,</span> <span class="ss">case_sensitive: </span><span class="kp">false</span>
<span class="k">end</span>

<span class="n">describe</span> <span class="no">Product</span> <span class="k">do</span>
  <span class="n">it</span> <span class="p">{</span> <span class="n">is_expected</span><span class="p">.</span><span class="nf">to</span> <span class="n">validate_uniqueness_of</span><span class="p">(</span><span class="ss">:name</span><span class="p">)</span> <span class="p">}</span>
<span class="k">end</span>
</code></pre>

<p>(<a href="https://github.com/thoughtbot/shoulda-matchers/commit/57a19228b6a85f12ba7a79a26dae5869c1499c6d">57a1922</a>)</p></li>
<li><p><code>ensure_inclusion_of</code>, <code>ensure_exclusion_of</code>, and <code>ensure_length_of</code> have been
removed in favor of their <code>validate_*</code> counterparts. (<a href="https://github.com/thoughtbot/shoulda-matchers/commit/55c8d09bf2af886540924efa83c3b518d926a770">55c8d09</a>)</p></li>
<li><p><code>set_the_flash</code> and <code>set_session</code> have been changed to more closely align with
each other:</p>

<ul>
<li><code>set_the_flash</code> has been removed in favor of <code>set_flash</code>. (<a href="https://github.com/thoughtbot/shoulda-matchers/commit/801f2c7c1eab3b2053244485c9800f850959cfef">801f2c7</a>)</li>
<li><code>set_session(&#39;foo&#39;)</code> is no longer valid syntax, please use
<code>set_session[&#39;foo&#39;]</code> instead. (<a href="https://github.com/thoughtbot/shoulda-matchers/commit/535fe05be8686fdafd8b22f2ed5c4192bd565d50">535fe05</a>)</li>
<li><code>set_session[&#39;key&#39;].to(nil)</code> will no longer pass when the key in question
has not been set yet. (<a href="https://github.com/thoughtbot/shoulda-matchers/commit/535fe05be8686fdafd8b22f2ed5c4192bd565d50">535fe05</a>)</li>
</ul></li>
<li><p>Change <code>set_flash</code> so that <code>set_flash[:foo].now</code> is no longer valid syntax.
You&#39;ll want to use <code>set_flash.now[:foo]</code> instead. This was changed in order to
more closely align with how <code>flash.now</code> works when used in a controller.
(<a href="https://github.com/thoughtbot/shoulda-matchers/pull/755">#755</a>, <a href="https://github.com/thoughtbot/shoulda-matchers/pull/752">#752</a>)</p></li>
<li><p>Change behavior of <code>validate_uniqueness_of</code> when the matcher is not
qualified with any scopes, but your validation is. Previously the following
test would pass when it now fails:</p></li>
</ul>

<pre class="code ruby"><code class="ruby">  <span class="k">class</span> <span class="nc">Post</span> <span class="o">&lt;</span> <span class="no">ActiveRecord</span><span class="o">::</span><span class="no">Base</span>
    <span class="n">validate</span> <span class="ss">:slug</span><span class="p">,</span> <span class="ss">uniqueness: </span><span class="p">{</span> <span class="ss">scope: :user_id</span> <span class="p">}</span>
  <span class="k">end</span>

  <span class="n">describe</span> <span class="no">Post</span> <span class="k">do</span>
    <span class="n">it</span> <span class="p">{</span> <span class="n">should</span> <span class="n">validate_uniqueness_of</span><span class="p">(</span><span class="ss">:slug</span><span class="p">)</span> <span class="p">}</span>
  <span class="k">end</span>
</code></pre>

<p>(<a href="https://github.com/thoughtbot/shoulda-matchers/commit/6ac7b8158cfba3b518eb3da3c24345e4473b416f">6ac7b81</a>)</p>

<h3 id="bug-fixes">Bug fixes</h3>

<ul>
<li><p>So far the tests for the gem have been running against only SQLite. Now they
run against PostgreSQL, too. As a result we were able to fix some
Postgres-related bugs, specifically around <code>validate_uniqueness_of</code>:</p>

<ul>
<li>When scoped to a UUID column that ends in an &quot;f&quot;, the matcher is able to
generate a proper &quot;next&quot; value without erroring. (<a href="https://github.com/thoughtbot/shoulda-matchers/pull/402">#402</a>, <a href="https://github.com/thoughtbot/shoulda-matchers/pull/587">#587</a>, <a href="https://github.com/thoughtbot/shoulda-matchers/pull/662">#662</a>)</li>
<li>Support scopes that are PostgreSQL array columns. Please note that this is
only supported for Rails 4.2 and greater, as versions before this cannot
handle array columns correctly, particularly in conjunction with the
uniqueness validator. (<a href="https://github.com/thoughtbot/shoulda-matchers/pull/554">#554</a>)</li>
<li>Fix so that when scoped to a text column and the scope is set to nil before
running it through the matcher, the matcher does not fail. (<a href="https://github.com/thoughtbot/shoulda-matchers/pull/521">#521</a>, <a href="https://github.com/thoughtbot/shoulda-matchers/pull/607">#607</a>)</li>
</ul></li>
<li><p>Fix <code>define_enum_for</code> so that it actually tests that the attribute is present
in the list of defined enums, as you could fool it by merely defining a class
method that was the pluralized version of the attribute name. In the same
vein, passing a pluralized version of the attribute name to <code>define_enum_for</code>
would erroneously pass, and now it fails. (<a href="https://github.com/thoughtbot/shoulda-matchers/pull/641">#641</a>)</p></li>
<li><p>Fix <code>permit</code> so that it does not break the functionality of
ActionController::Parameters#require. (<a href="https://github.com/thoughtbot/shoulda-matchers/pull/648">#648</a>, <a href="https://github.com/thoughtbot/shoulda-matchers/pull/675">#675</a>)</p></li>
<li><p>Fix <code>validate_uniqueness_of</code> + <code>scoped_to</code> so that it does not raise an error
if a record exists where the scoped attribute is nil. (<a href="https://github.com/thoughtbot/shoulda-matchers/pull/677">#677</a>)</p></li>
<li><p>Fix <code>route</code> matcher so if your route includes a default <code>format</code>, you can
specify this as a symbol or string. (<a href="https://github.com/thoughtbot/shoulda-matchers/pull/693">#693</a>)</p></li>
<li><p>Fix <code>validate_uniqueness_of</code> so that it allows you to test against scoped
attributes that are boolean columns. (<a href="https://github.com/thoughtbot/shoulda-matchers/pull/457">#457</a>, <a href="https://github.com/thoughtbot/shoulda-matchers/pull/694">#694</a>)</p></li>
<li><p>Fix failure message for <code>validate_numericality_of</code> as it sometimes didn&#39;t
provide the reason for failure. (<a href="https://github.com/thoughtbot/shoulda-matchers/pull/699">#699</a>)</p></li>
<li><p>Fix <code>shoulda/matchers/independent</code> so that it can be required
independently, without having to require all of the gem. (<a href="https://github.com/thoughtbot/shoulda-matchers/pull/746">#746</a>, <a href="https://github.com/thoughtbot/shoulda-matchers/commit/e0a0200fe47157c161fb206043540804bdad664e">e0a0200</a>)</p></li>
</ul>

<h3 id="features">Features</h3>

<ul>
<li><p>Add <code>on</code> qualifier to <code>permit</code>. This allows you to make an assertion that
a restriction was placed on a slice of the <code>params</code> hash and not the entire
<code>params</code> hash. Although we don&#39;t require you to use this qualifier, we do
recommend it, as it&#39;s a more precise check. (<a href="https://github.com/thoughtbot/shoulda-matchers/pull/675">#675</a>)</p></li>
<li><p>Add <code>strict</code> qualifier to <code>validate_numericality_of</code>. (<a href="https://github.com/thoughtbot/shoulda-matchers/pull/620">#620</a>)</p></li>
<li><p>Add <code>on</code> qualifier to <code>validate_numericality_of</code>. (<a href="https://github.com/thoughtbot/shoulda-matchers/commit/97488690910520ed8e1f2e164b1982eff5ef1f19">9748869</a>; h/t <a href="https://github.com/thoughtbot/shoulda-matchers/pull/356">#356</a>,
<a href="https://github.com/thoughtbot/shoulda-matchers/pull/358">#358</a>)</p></li>
<li><p>Add <code>join_table</code> qualifier to <code>have_and_belong_to_many</code>. (<a href="https://github.com/thoughtbot/shoulda-matchers/pull/556">#556</a>)</p></li>
<li><p><code>allow_values</code> is now an alias for <code>allow_value</code>. This makes more sense when
checking against multiple values:</p></li>
</ul>

<pre class="code ruby"><code class="ruby">  <span class="n">it</span> <span class="p">{</span> <span class="n">should</span> <span class="n">allow_values</span><span class="p">(</span><span class="s1">'this'</span><span class="p">,</span> <span class="s1">'and'</span><span class="p">,</span> <span class="s1">'that'</span><span class="p">)</span> <span class="p">}</span>
</code></pre>

<p>(<a href="https://github.com/thoughtbot/shoulda-matchers/pull/692">#692</a>)</p>

<h2 id="2-8-0-2015-01-30">2.8.0 - 2015-01-30</h2>

<h3 id="deprecations">Deprecations</h3>

<ul>
<li><p><code>ensure_length_of</code> has been renamed to <code>validate_length_of</code>.
<code>ensure_length_of</code> is deprecated and will be removed in 3.0.0.</p></li>
<li><p><code>set_the_flash</code> has been renamed to <code>set_flash</code>. <code>set_the_flash</code> is
deprecated and will be removed in 3.0.0.</p></li>
<li><p><code>set_session(:foo)</code> is deprecated in favor of <code>set_session[:foo]</code>.
<code>set_session(:foo)</code> will be invalid syntax in 3.0.0.</p></li>
<li><p>Using <code>should set_session[:key].to(nil)</code> to assert that that a value has not
been set is deprecated. Please use <code>should_not set_session[:key]</code> instead.
In 3.0.0, <code>should set_session[:key].to(nil)</code> will only pass if the value is
truly nil.</p></li>
</ul>

<h3 id="bug-fixes">Bug fixes</h3>

<ul>
<li><p>Fix <code>delegate_method</code> so that it works again with shoulda-context. (<a href="https://github.com/thoughtbot/shoulda-matchers/pull/591">#591</a>)</p></li>
<li><p>Fix <code>validate_uniqueness_of</code> when used with <code>scoped_to</code> so that when one of
the scope attributes is a polymorphic <code>*_type</code> attribute and the model has
another validation on the same attribute, the matcher does not fail with an
error. (<a href="https://github.com/thoughtbot/shoulda-matchers/pull/592">#592</a>)</p></li>
<li><p>Fix <code>has_many</code> used with <code>through</code> so that when the association does not
exist, and the matcher fails, it does not raise an error when producing the
failure message. (<a href="https://github.com/thoughtbot/shoulda-matchers/pull/588">#588</a>)</p></li>
<li><p>Fix <code>have_and_belong_to_many</code> used with <code>join_table</code> so that it does not fail
when <code>foreign_key</code> and/or <code>association_foreign_key</code> was specified on the
association as a symbol instead of a string. (<a href="https://github.com/thoughtbot/shoulda-matchers/pull/584">#584</a>)</p></li>
<li><p>Fix <code>allow_value</code> when an i18n translation key is passed to <code>with_message</code> and
the <code>:against</code> option is used to specify an alternate attribute. A bug here
also happened to affect <code>validate_confirmation_of</code> when an i18n translation
key is passed to <code>with_message</code>. (<a href="https://github.com/thoughtbot/shoulda-matchers/pull/593">#593</a>)</p></li>
<li><p>Fix <code>class_name</code> qualifier for association matchers so that if the model being
referenced is namespaced, the matcher will correctly resolve the class before
checking it against the association&#39;s <code>class_name</code>. (<a href="https://github.com/thoughtbot/shoulda-matchers/pull/537">#537</a>)</p></li>
<li><p>Fix <code>validate_inclusion_of</code> used with <code>with_message</code> so that it fails if given
a message that does not match the message on the validation. (<a href="https://github.com/thoughtbot/shoulda-matchers/pull/598">#598</a>)</p></li>
<li><p>Fix <code>route</code> matcher so that when controller and action are specified in hash
notation (e.g. <code>posts#show</code>), route parameters such as <code>id</code> do not need to be
specified as a string but may be specified as a number as well. (<a href="https://github.com/thoughtbot/shoulda-matchers/pull/602">#602</a>)</p></li>
</ul>

<h3 id="features">Features</h3>

<ul>
<li><p>Add ability to test <code>:primary_key</code> option on associations. (<a href="https://github.com/thoughtbot/shoulda-matchers/pull/597">#597</a>)</p></li>
<li><p>Add <code>allow_blank</code> qualifier to <code>validate_uniqueness_of</code> to complement
the <code>allow_blank</code> option. (<a href="https://github.com/thoughtbot/shoulda-matchers/pull/543">#543</a>)</p></li>
<li><p>Change <code>set_session</code> so that #[] and #to qualifiers are optional, similar to
<code>set_flash</code>. That is, you can now say <code>should set_session</code> to assert that any
flash value has been set, or <code>should set_session.to(&#39;value&#39;)</code> to assert that
any value in the session is &#39;value&#39;.</p></li>
<li><p>Change <code>set_session</code> so that its #to qualifier supports regexps, similar to
<code>set_flash</code>.</p></li>
<li><p>Add <code>with_prefix</code> qualifier to <code>delegate_method</code> to correspond to the <code>prefix</code>
option for Rails&#39;s <code>delegate</code> macro. (<a href="https://github.com/thoughtbot/shoulda-matchers/pull/622">#622</a>)</p></li>
<li><p>Add support for Rails 4.2, especially fixing <code>serialize</code> matcher to remove
warning about <code>serialized_attributes</code> being deprecated. (<a href="https://github.com/thoughtbot/shoulda-matchers/pull/627">#627</a>)</p></li>
<li><p>Update <code>dependent</code> qualifier on association matchers to support <code>:destroy</code>,
<code>:delete</code>, <code>:nullify</code>, <code>:restrict</code>, <code>:restrict_with_exception</code>, and
<code>:restrict_with_error</code>. You can also pass <code>true</code> or <code>false</code> to assert that
the association has (or has not) been declared with <em>any</em> dependent option.
(<a href="https://github.com/thoughtbot/shoulda-matchers/pull/631">#631</a>)</p></li>
</ul>

<h3 id="improvements">Improvements</h3>

<ul>
<li>Tweak <code>allow_value</code> failure message so that it reads a bit nicer when listing
existing errors.</li>
</ul>

<h2 id="2-7-0-2014-09-03">2.7.0 - 2014-09-03</h2>

<h3 id="deprecations">Deprecations</h3>

<ul>
<li><p><code>ensure_inclusion_of</code> has been renamed to <code>validate_inclusion_of</code>.
<code>ensure_inclusion_of</code> is deprecated and will be removed in 3.0.0.</p></li>
<li><p><code>ensure_exclusion_of</code> has been renamed to <code>validate_exclusion_of</code>.
<code>ensure_exclusion_of</code> is deprecated and will be removed in 3.0.0.</p></li>
</ul>

<h3 id="bug-fixes">Bug fixes</h3>

<ul>
<li><p>Fix <code>delegate_method</code> so that it does not raise an error if the method that
returns the delegate object is private.</p></li>
<li><p>Warn when <code>ensure_inclusion_of</code> is chained with <code>.in_array([false, true])</code>
as well as with <code>.in_array([true, false])</code>.</p></li>
<li><p>Fix <code>set_session</code> so that the <code>to</code> qualifier if given nil checks that the
session variable in question was set to nil (previously this actually did
nothing).</p></li>
<li><p>Fix <code>filter_param</code> so that it works when <code>config.filter_parameters</code> contains
regexes.</p></li>
<li><p>Fix <code>delegate_method</code> so that it can be required independent of Active
Support.</p></li>
<li><p>Fix <code>validate_uniqueness_of</code>. When used against an unpersisted record whose
model contained a non-nullable column other than the one being validated, the
matcher would break. Even if the test set that column to a value beforehand,
the record had to be persisted in order for the matcher to work. Now this is
no longer the case and the record can remain unpersisted.</p></li>
<li><p>Fix <code>validate_absence_of</code>: it required that a string be passed as the
attribute name rather than a symbol (which is the usual and documented usage).</p></li>
</ul>

<h3 id="features">Features</h3>

<ul>
<li>Add new matcher <code>define_enum_for</code> to test usage of the <code>enum</code> macro introduced
in Rails 4.1.</li>
</ul>

<h3 id="improvements">Improvements</h3>

<ul>
<li><p><code>have_and_belongs_to_many</code> now checks to make sure that the join table
contains the correct columns for the left- and right-hand side of the
association.</p></li>
<li><p>Reword failure message for <code>delegate_method</code> so that it&#39;s a little more
helpful.</p></li>
</ul>

<h2 id="2-6-2-2014-07-19">2.6.2 - 2014-07-19</h2>

<h3 id="bug-fixes">Bug fixes</h3>

<ul>
<li><p>If you have a Rails &gt;= 4.1 project and you are running tests using Spring,
matchers that depend on assertions within Rails&#39; testing layer (e.g.
<code>render_template</code> and <code>route</code>) will no longer fail.</p></li>
<li><p>Fix <code>permit</code> so that it can be used more than once in the same test.</p></li>
<li><p>Revert change to <code>validate_uniqueness_of</code> made in 2.6.0 so that it no longer
provides default values for non-primary, non-nullable columns. This approach
was causing test failures because it makes the assumption that none of these
columns allow only specific values, which is not true. If you get an error
from <code>validate_uniqueness_of</code>, your best bet continues to be creating a record
manually and calling <code>validate_uniqueness_of</code> on that instead.</p></li>
<li><p>The majority of warnings that the gem produced have been removed. The gem
still produces warnings under Ruby 1.9.3; we will address this in a future
release.</p></li>
</ul>

<h2 id="2-6-1-2014-04-30">2.6.1 - 2014-04-30</h2>

<h3 id="bug-fixes">Bug fixes</h3>

<ul>
<li><p>Revert changes to <code>validate_numericality_of</code> made in the last release, which
made it so that comparison qualifiers specified on the validation are tested
using a very small decimal number offset rather than a whole number by
default, except if the matcher was qualified with <code>only_integer</code>. This means
that prior to 2.6.0, if your validation specified <code>only_integer</code> and you did
not, then after 2.6.0 that test would fail. This is now fixed.</p></li>
<li><p>Fix regression in previous release where ActiveRecord matchers would not be
included when ActiveRecord wasn&#39;t defined (i.e. if you were using ActiveModel
only).</p></li>
<li><p>Revert the behavior of <code>allow_value</code> changed in 2.6.0 (it will no longer raise
CouldNotClearAttribute). This was originally done as a part of a fix for
<code>validate_presence_of</code> when used in conjunction with <code>has_secure_password</code>.
That fix has been updated so that it does not affect <code>allow_value</code>.</p></li>
<li><p>Fix callback matchers and correct test coverage.</p></li>
<li><p>Fix <code>permit</code> so that it does not interfere with different usages of <code>params</code>
in your controller action. Specifically, this will not raise an error:
<code>params.fetch(:foo, {}).permit(:bar, :baz)</code> (the <code>permit</code> will have no
problems recognizing that :bar and :baz are permitted params).</p></li>
<li><p>Fix <code>permit</code> on Rails 4.1 to use PATCH by default for #update instead of PUT.
Previously you had to specify this manually.</p></li>
<li><p>Fix <code>permit</code> so that it track multiple calls to #permit in your controller
action. Previously only the last usage of #permit would be considered in
determining whether the matcher matched.</p></li>
<li><p>Fix <code>permit</code> so that if the route for your action requires params (such as id)
then you can now specify those params:
<code>permit(:first_name, :last_name).for(:update, params: { id: 42 })</code>.</p></li>
<li><p>Fix <code>delegate_method</code> so that it does not stub the target method forever,
returning it to its original implementation after the match ends.</p></li>
<li><p>Fix <code>validate_uniqueness_of</code> to work with Rails 4.1 enum columns.</p></li>
</ul>

<h3 id="features">Features</h3>

<ul>
<li>Teach <code>with_message</code> qualifier on <code>allow_value</code> to accept a hash of i18n
interpolation values:
<code>allow_value(&#39;foo&#39;).for(:attr).with_message(:greater_than, values: { count: 20 })</code>.</li>
</ul>

<h2 id="2-6-0-2014-04-12">2.6.0 - 2014-04-12</h2>

<ul>
<li><p>The boolean argument to <code>have_db_index</code>&#39;s <code>unique</code> option is now optional, for
consistency with other matchers.</p></li>
<li><p>Association matchers now test that the model being referred to (either
implicitly or explicitly, using <code>:class_name</code>) actually exists.</p></li>
<li><p>Add ability to test <code>:autosave</code> option on associations.</p></li>
<li><p>Fix <code>validate_uniqueness_of(...).allow_nil</code> so that it can be used against an
non-password attribute which is in a model that <code>has_secure_password</code>. Doing
so previously would result in a &quot;Password digest missing on new record&quot; error.</p></li>
<li><p>Fix description for <code>validate_numericality_of</code> so that if the matcher fails,
the error message reported does not say the matcher accepts integer values if
you didn&#39;t specify that.</p></li>
<li><p>Fix <code>ensure_inclusion_of</code> so that you can use it against a boolean column
(and pass boolean values to <code>in_array</code>). There are two caveats:</p>

<ul>
<li>You should not test that your attribute allows both true and false
(<code>.in_array([true, false]</code>); there&#39;s no way to test that it doesn&#39;t accept
anything other than that.</li>
<li>You cannot test that your attribute allows nil (<code>.in_array([nil])</code>) if
the column does not allow null values.</li>
</ul></li>
<li><p>Change <code>validate_uniqueness_of(...)</code> so that it provides default values for
non-nullable attributes.</p></li>
<li><p>Running <code>rake</code> now installs Appraisals before running the test suite.
(Additionally, we now manage Appraisals using the <code>appraisal</code> executable in
Appraisal 1.0.0.)</p></li>
<li><p>Add <code>allow_nil</code> option to <code>validate_numericality_of</code> so that you can validate
that numeric values are validated only if a value is supplied.</p></li>
<li><p>Fix <code>validate_numericality_of</code> so that test fails when the value with
<code>greater_than</code>, <code>greater_than_or_equal_to</code>, <code>less_than</code>, <code>less_than_or_equal_
to</code> or <code>equal_to</code> is not appropriate.</p></li>
<li><p>Change <code>validate_presence_of</code> under Rails 4 so that if you are using it with a
user whose model <code>has_secure_password</code> and whose password is set to a value,
you will be instructed to use a user whose password is blank instead. The
reason for this change is due to the fact that Rails 4&#39;s version of
<code>has_secure_password</code> defines #password= such that <code>nil</code> will be ignored,
which interferes with how <code>validate_presence_of</code> works.</p></li>
<li><p>Add ability to test <code>belongs_to</code> associations defined with <code>:inverse_of</code>.</p></li>
<li><p>Add back matchers that were removed in 2.0.0: <code>permit</code>, for testing strong
parameters, and <code>delegate_method</code>, for testing delegation.</p></li>
<li><p>Add new matchers for testing controller filters: <code>before_filter</code>,
<code>after_filter</code>, and <code>around_filter</code> (aliased to <code>before_action</code>,
<code>after_action</code> and <code>around_action</code> for Rails 4).</p></li>
<li><p>Fix <code>rescue_from</code> matcher so that it does not raise an error when testing
a method handler which has been marked as protected or private.</p></li>
<li><p>Fix compatibility issues with Rails 4.1:</p>

<ul>
<li><code>set_the_flash</code> and <code>have_and_belongs_to_many</code> no longer raise errors</li>
<li>Minitest no longer prints warnings whenever shoulda-matchers is required</li>
</ul></li>
</ul>

<h2 id="2-5-0-2014-01-10">2.5.0 - 2014-01-10</h2>

<ul>
<li><p>Fix Rails/Test::Unit integration to ensure that the test case classes we are
re-opening actually exist.</p></li>
<li><p>Fix <code>ensure_length_of</code> so that it uses the right message to validate when
<code>is_equal_to</code> is specified in conjunction with a custom message.</p></li>
<li><p>The <code>route</code> matcher now accepts specifying a controller/action pair as a
string instead of only a hash (e.g. <code>route(...).to(&#39;posts#index&#39;)</code> instead of
<code>route(...).to(controller: &#39;posts&#39;, action: &#39;index&#39;)</code>).</p></li>
<li><p>The <code>ensure_inclusion_of</code> matcher now works with a decimal column.</p></li>
<li><p>Under Rails 3, if you had an association matcher chained with the
the <code>order</code> submatcher -- e.g. <code>should have_many(:foos).order(:bar)</code> -- and
your association had an <code>:include</code> on it, using the matcher would raise an
error. This has been fixed.</p></li>
<li><p>Fix <code>validate_uniqueness_of</code> so it doesn&#39;t fail if the attribute under
test has a limit of fewer than 16 characters.</p></li>
<li><p>You can now test that your <code>has_many :through</code> or <code>has_one :through</code>
associations are defined with a <code>:source</code> option.</p></li>
<li><p>Add new matcher <code>validates_absence_of</code>.</p></li>
<li><p>Update matchers so that they use <code>failure_message</code> and
<code>failure_message_when_negated</code> to define error messages. These are new methods
in the upcoming RSpec 3 release which replace <code>failure_message_for_should</code> and
<code>failure_message_for_should_not</code>. We&#39;ve kept backward compatibility so all of
your existing tests should still work -- this is just to make sure when RSpec
3 is released you don&#39;t get a bunch of warnings.</p></li>
</ul>

<h2 id="2-4-0-2013-09-20">2.4.0 - 2013-09-20</h2>

<ul>
<li><p>Fix a bug with the <code>validate_numericality_of</code> matcher that would not allow the
<code>with_message</code> option on certain submatchers.</p></li>
<li><p>Fix a regression with context-dependent validations in ActiveResource.</p></li>
<li><p>shoulda-matchers is now fully compatible with Rails 4.</p></li>
<li><p>When not using RSpec, shoulda-matchers is now auto-included into
ActiveSupport::TestCase instead of Test::Unit::TestCase (in Rails 4
the former no longer inherits from the latter).</p></li>
</ul>

<h2 id="2-3-0-2013-08-16">2.3.0 - 2013-08-16</h2>

<ul>
<li><p>Fix a bug in <code>ensure_inclusion_of</code> that would cause issues with using
<code>in_array</code> with an integer value.</p></li>
<li><p>Add support for PostgreSQL UUID columns to <code>validates_uniqueness_of</code> (<a href="https://github.com/thoughtbot/shoulda-matchers/pull/334">#334</a>).</p></li>
<li><p>Fix <code>validates_numericality_of</code> so that <code>is_equal_to</code> submatcher works
correctly (<a href="https://github.com/thoughtbot/shoulda-matchers/pull/326">#326</a>).</p></li>
<li><p>Fix context support for validation matchers and disallowed values (<a href="https://github.com/thoughtbot/shoulda-matchers/pull/313">#313</a>).</p></li>
<li><p>Add a <code>counter_cache</code> submatcher for <code>belongs_to</code> associations (<a href="https://github.com/thoughtbot/shoulda-matchers/pull/311">#311</a>).</p></li>
<li><p>Add a <code>rescue_from</code> matcher for Rails controllers which checks that the
correct ActiveSupport call has been made and that the handlers exist without
actually throwing an exception (#287).</p></li>
<li><p>Changed the scope of AssociationMatcher methods from protected to private.</p></li>
<li><p>Extracted <code>#order</code>, <code>#through</code>, and <code>#dependent</code> from AssociationMatcher as
their own submatchers.</p></li>
</ul>

<h2 id="2-2-0-2013-06-11">2.2.0 - 2013-06-11</h2>

<ul>
<li><p>Fix <code>have_and_belong_to_many</code> matcher issue for Rails 4.</p></li>
<li><p>Fix <code>validate_uniqueness_of.scoped_to</code> issue when the scoped field is already
taken (<a href="https://github.com/thoughtbot/shoulda-matchers/pull/207">#207</a>).</p></li>
<li><p>Add comparison submatchers to <code>validate_numericality_of</code> to correspond to the
comparison options you can give to <code>validates_numericality_of</code> (<a href="https://github.com/thoughtbot/shoulda-matchers/pull/244">#244</a>).</p></li>
</ul>

<h2 id="2-1-0-2013-05-05">2.1.0 - 2013-05-05</h2>

<ul>
<li><p>Add missing <code>failure_message_for_should_not</code> implementations to
<code>validate_numericality_of</code> and its submatchers.</p></li>
<li><p>Support validation contexts for testing validations <code>on: :create</code> and when
using custom contexts like <code>model.valid?(:my_context)</code>.</p></li>
<li><p>Fix a bug in validations with autosaved models.</p></li>
<li><p>Fix maximum value detection for the <code>ensure_inclusion_of</code> and
<code>ensure_exclusion_of</code> matchers.</p></li>
<li><p>Add <code>:odd</code> and <code>:even</code> options to the <code>validate_numericality_of</code> matcher.</p></li>
<li><p>Add <code>:touch</code> option to AssociationMatcher.</p></li>
<li><p>Ruby 2.0.0 is now officially supported.</p></li>
<li><p>Fix the issue where using <code>%{attribute}</code> or <code>%{model}</code> in I18n translations
raised exceptions.</p></li>
<li><p>Support datetime columns in <code>validate_uniqueness_of.scoped_to</code>.</p></li>
<li><p>Add <code>allow_nil</code> option to the <code>validate_uniqueness_of</code> matcher.</p></li>
</ul>

<h2 id="2-0-0-2013-04-05">2.0.0 - 2013-04-05</h2>

<ul>
<li>Remove the following matchers:

<ul>
<li><code>assign_to</code></li>
<li><code>respond_with_content_type</code></li>
<li><code>query_the_database</code></li>
<li><code>validate_format_of</code></li>
<li><code>have_sent_email</code></li>
<li><code>permit</code> (strong parameters matcher)</li>
<li><code>delegate_method</code></li>
</ul></li>
</ul>

<p>For more information about 2.0 changes, see:
<a href="https://robots.thoughtbot.com/post/47031676783/shoulda-matchers-2-0">https://robots.thoughtbot.com/post/47031676783/shoulda-matchers-2-0</a>.</p>

<h2 id="1-5-6-2013-03-29">1.5.6 - 2013-03-29</h2>

<ul>
<li>Revert previous change in AllowValueMatcher that added a check for a
properly-set attribute.</li>
</ul>

<h2 id="1-5-5-2013-03-28">1.5.5 - 2013-03-28</h2>

<ul>
<li><p>AllowValueMatcher checks that the right value is used for attempts at
setting the attribute with it. <em>Please note that previously-passing tests
might now fail. It is likely that it&#39;s not a bug, but please make sure that
the code you&#39;re testing is written properly before submitting an issue.</em></p></li>
<li><p>Use DisallowValueMatcher for <code>disallows_value_of</code> method.</p></li>
<li><p>Assert <code>class_name</code> value on real class name for AssociationMatcher.</p></li>
<li><p>Correct the variable used for <code>validate_confirmation_of</code> matcher description.</p></li>
</ul>

<h2 id="1-5-4-2013-03-21">1.5.4 - 2013-03-21</h2>

<ul>
<li>Properly-released version of 1.5.3.</li>
</ul>

<h2 id="1-5-3-2013-03-21-yanked">1.5.3 - 2013-03-21 [YANKED]</h2>

<ul>
<li>Alleviate the need to add <code>rspec</code> gem to your app.</li>
</ul>

<h2 id="1-5-2-2013-03-19">1.5.2 - 2013-03-19</h2>

<p>???</p>

<h2 id="1-5-1-2013-03-19">1.5.1 - 2013-03-19</h2>

<ul>
<li><p>Bump version dependency of Bourne to allow for Mocha upgrade.</p></li>
<li><p>Should fix incompatibility with MiniTest.</p></li>
</ul>

<h2 id="1-5-0-2013-03-15">1.5.0 - 2013-03-15</h2>

<ul>
<li><p>Deprecate the following matchers:</p>

<ul>
<li><code>assign_to</code></li>
<li><code>respond_with_content_type</code></li>
<li><code>query_the_database</code></li>
<li><code>validate_format_of</code></li>
<li><code>have_sent_email</code></li>
<li><code>permit</code> (strong parameters matcher)</li>
<li><code>delegate_method</code></li>
</ul></li>
<li><p>Use RSpec&#39;s native <code>configure.include</code> syntax for including matchers into
RSpec (#204).</p></li>
<li><p>Do not force MiniTest loading when test-unit is available (this was fixed
before 1.3.0 then reverted in 1.3.0).</p></li>
</ul>

<h2 id="1-4-2-2012-11-30">1.4.2 - 2012-11-30</h2>

<ul>
<li>Add a new <code>delegate_method</code> matcher.</li>
</ul>

<h2 id="1-4-1-2012-10-15">1.4.1 - 2012-10-15</h2>

<ul>
<li><p>Fix an issue when used with Test::Unit on the allow value matcher.</p></li>
<li><p>Fix an issue with using <code>ensure_inclusion_of(:attr)</code> given an array of true or
false values.</p></li>
</ul>

<h2 id="1-4-0-2012-10-05">1.4.0 - 2012-10-05</h2>

<ul>
<li><p>Add <code>strict</code> option to validation matchers.</p></li>
<li><p>Verify that arguments to <code>set_the_flash</code> matcher are valid.</p></li>
<li><p>Fix issue in ValidateUniquenessMatcher that could cause an error on postgres.</p></li>
<li><p>You can now pass an array to <code>ensure_exclusion_of</code> using <code>in_array</code>.</p></li>
<li><p>Allow testing of <code>:foreign_key</code> option for <code>has_one</code> relationships using the
association matcher.</p></li>
<li><p>Fix bug where <code>ensure_length_of</code> would pass if the given string was too long.</p></li>
<li><p><code>allow_blank</code> will now allow values such as: &#39; &#39;, &#39;\n&#39;, and &#39;\r&#39;.</p></li>
<li><p>Test outside values for <code>ensure_inclusion_of</code> when given an array.</p></li>
<li><p>Fix the output of the <code>set_the_flash</code> matcher.</p></li>
</ul>

<h2 id="1-3-0-2012-08-30">1.3.0 - 2012-08-30</h2>

<ul>
<li><p><code>validate_format_of</code> will accept <code>allow_blank(bool)</code> and <code>allow_nil(bool)</code>.</p></li>
<li><p>Prefer Test::Unit to MiniTest when loading integrations so that RubyMine is
happy (<a href="https://github.com/thoughtbot/shoulda-matchers/pull/80">#88</a>).</p></li>
<li><p><code>validates_uniqueness_of</code> will now create a record if one does not exist.
Previously, users were required to create a record in the database before
using this matcher.</p></li>
<li><p>Fix an edge case when where the matchers weren&#39;t loaded into Test::Unit when
mixing RSpec and Test::Unit tests and also loading both the &#39;rspec-rails&#39; gem
and &#39;shoulda-matchers&#39; gem from the same Gemfile group, namely [:test,
:development].</p></li>
<li><p><code>controller.should_not render_partial</code> now correctly matches <code>render partial:
&quot;partial&quot;</code>.</p></li>
</ul>

<h2 id="1-2-0-2012-06-14">1.2.0 - 2012-06-14</h2>

<ul>
<li><p><code>ensure_inclusion_of</code> now has an <code>in_array</code> parameter:
<code>ensure_inclusion_of(:attr).in_array([&#39;foo&#39;, &#39;bar&#39;])</code>. It cannot be used with
the <code>.in_range</code> option. (vpereira)</p></li>
<li><p><code>ensure_in_inclusion_of</code> with <code>in_array</code> will accept <code>allow_blank(bool)</code> and
<code>allow_nil(false)</code>.</p></li>
<li><p>Test against Rails 3.2.</p></li>
<li><p>Fix <code>ensure_length_of</code> to use all possible I18n error messages.</p></li>
<li><p><code>have_db_index.unique(nil)</code> used to function exactly the same as
<code>have_db_index</code> with no unique option. It now functions the same as
<code>have_db_index.unique(false)</code>.</p></li>
<li><p>In 1.1.0, <code>have_sent_email</code> checked all emails to ensure they matched. It now
checks that only one email matches, which restores 1.0.0 behavior.</p></li>
</ul>

<h2 id="1-1-0-2012-04-13">1.1.0 - 2012-04-13</h2>

<ul>
<li><p>Add <code>only_integer</code> option to <code>validate_numericality_of</code>:
<code>should validate_numericality_of(:attribute).only_integer</code>.</p></li>
<li><p>Add a <code>query_the_database</code> matcher:</p></li>
</ul>

<pre class="code ruby"><code class="ruby">  <span class="n">it</span> <span class="p">{</span> <span class="n">should</span> <span class="n">query_the_database</span><span class="p">(</span><span class="mi">4</span><span class="p">.</span><span class="nf">times</span><span class="p">).</span><span class="nf">when_calling</span><span class="p">(</span><span class="ss">:complicated_method</span><span class="p">)</span> <span class="p">}</span>
  <span class="n">it</span> <span class="p">{</span> <span class="n">should</span> <span class="n">query_the_database</span><span class="p">(</span><span class="mi">4</span><span class="p">.</span><span class="nf">times</span><span class="p">).</span><span class="nf">or_less</span><span class="p">.</span><span class="nf">when_calling</span><span class="p">(</span><span class="ss">:complicated_method</span><span class="p">)</span> <span class="p">}</span>
  <span class="n">it</span> <span class="p">{</span> <span class="n">should_not</span> <span class="n">query_the_database</span><span class="p">.</span><span class="nf">when_calling</span><span class="p">(</span><span class="ss">:complicated_method</span><span class="p">)</span> <span class="p">}</span>
</code></pre>

<ul>
<li><p>Database columns are now correctly checked for primality. E.G., this works
now: <code>it { should have_db_column(:id).with_options(:primary =&gt; true) }</code></p></li>
<li><p>The flash matcher can check specific flash keys using [], like so:
<code>it { should set_the_flash[:alert].to(&quot;Password doesn&#39;t match&quot;) }</code></p></li>
<li><p>The <code>have_sent_email</code> matcher can check <code>reply_to</code>:
<code>it { should have_sent_email.reply_to([user, other]) }</code></p></li>
<li><p>Add <code>validates_confirmation_of</code> matcher:
<code>it { should validate_confirmation_of(:password) }</code></p></li>
<li><p>Add <code>serialize</code> matcher:
<code>it { should serialize(:details).as(Hash).as_instance_of(Hash) }</code></p></li>
<li><p>shoulda-matchers checks for all possible I18n keys, instead of just
e.g. <code>activerecord.errors.messages.blank</code></p></li>
<li><p>Add <code>accept_nested_attributes</code> matcher</p></li>
<li><p>Our very first dependency: ActiveSupport &gt;= 3.0.0</p></li>
</ul>

<h2 id="1-0-0-2011-11-02">1.0.0 - 2011-11-02</h2>

<p>First release!</p>
</div></div>

      <div id="footer">
  Generated on
  March 15, 2024
  by
  <a href="https://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">YARD</a>.
</div>

    </div>

  </body>
</html>
